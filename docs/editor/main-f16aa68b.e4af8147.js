"use strict";(self.webpackChunk_reneos_3d_editor=self.webpackChunk_reneos_3d_editor||[]).push([[730],{279:(e,t,l)=>{l.d(t,{A:()=>u});var o=l(2655),s=l(9216),n=l(1915),a=l(8809),i=l(9391),c=l(6836);const r={uid:null,path:"",type:"slide",name:"New Slide",children:[]};let d;async function p(e){console.log(e);const t=e.exportData();await s.A.updateItem("slides",{id:t.uid,...t})}const m=(0,o.reactive)({init:async function(){const e=await s.A.getAllItems("slides");if(0===e.length){const t={uid:"base",type:"slide",name:"Base",scene:{background:{},environment:{}},camera:{uid:"camroot.maincam"},children:[{uid:"camroot"}]};e.push(t),await s.A.addItem("slides",{id:t.uid,...t})}m.list.length=0,d=n.A.getSlidesManager(),d.on("change",((e,t)=>{m.actived=m.list.find((t=>t.uid===e.uid))}));const t=d.AddSlides(e);for(let e=0;e<t.length;e++){const l=(0,o.reactive)(t[e]);for(let e=0;e<l.children.length;e++){const t=(0,o.reactive)(l.children[e]);t.model=c.A.findElement(t.paths),t.model.state=t,l.children[e]=t}m.list.push(l)}},create:async function(e){e.uid=`sl${Date.now()}`;const t={...structuredClone(r),...e},l=d.AddSlide(t),s=(0,o.reactive)(l);return m.list.push(s),await p(s),a.A.add({message:`Слайд ${s.name} добавлен`}),s},edit:function(e){},remove:function(e){},createState:async function(e){const t=c.A.findElement(e),l={uid:t.uid,name:t.name||"",paths:t.paths},s=n.A.getSlidesManager().CreateState(l),a=(0,o.reactive)(s);a.model=c.A.findElement(t.paths),a.model.state=a,m.actived.addState(a),s.activate(),await p(m.actived)},editState:function(){},removeState:function(){},save:p,saveState:async function(e){const t=e.slide.exportData();await s.A.updateItem("slides",{id:t.uid,...t})},actived:null,list:[],async goto(e){if(await n.A.getSlidesManager().GoTo(e),m.actived="number"==typeof e?m.list[e]:m.list.find((t=>t.uid===e)),i.A.selected?.isState){const e=m.actived.children.find((e=>e.uid===i.A.selected.uid&&e.type===i.A.selected.type));e?i.A.select(e):i.A.select(null)}},update(){},remove(){},find:e=>m.list.find((t=>t.uid===e)),removeState(e,t){for(let l=0;l<m.list.length;l++){const o=m.list[l];if(t&&o.uid!==t)continue;const s=o.children.findIndex((t=>t.path===e));s>=0&&o.children.splice(s,1).forEach((e=>{e.model.state=null,e.model.visible=!1}))}},exportData:()=>JSON.parse(JSON.stringify(m.list.map((e=>({...e.exportData(),children:e.children.map((e=>({...e.data})))})))))}),u=m},1146:(e,t,l)=>{l.d(t,{A:()=>n});var o=l(2655);const s={name:"NameEditor",props:{selected:{type:Object},label:{type:String}},methods:{onChangeName(e){this.selected.name=e}}},n=(0,l(6262).A)(s,[["render",function(e,t,l,s,n,a){const i=(0,o.resolveComponent)("LabelEdit");return(0,o.openBlock)(),(0,o.createElementBlock)("div",null,[(0,o.createVNode)(i,{label:l.label,"onUpdate:value":t[0]||(t[0]=e=>a.onChangeName(e)),value:l.selected.name||l.selected.model?.name||l.selected.uid},null,8,["label","value"])])}]])},1681:(e,t,l)=>{l.d(t,{A:()=>k});var o=l(2655);const s={style:{display:"flex","flex-direction":"column"}},n={style:{display:"flex","justify-content":"center","margin-top":"10px"}},a={class:"assetblock"},i={key:0,class:"short"},c={class:"short-text"},r={key:0,class:"assetcontent"},d={class:"assetrow"},p={class:"assetrow"},m={name:"AssetView",props:{asset:{type:Object},label:{type:String}},mounted(){},data:()=>({view:!0}),computed:{src(){return this.$app.assets.list.find((e=>e.uid===this.asset.uid))},types(){return this.$app.assets.types}}};var u=l(6262);const h=(0,u.A)(m,[["render",function(e,t,l,s,n,m){const u=(0,o.resolveComponent)("icon"),h=(0,o.resolveDirective)("tooltip");return(0,o.openBlock)(),(0,o.createElementBlock)("div",a,[(0,o.createElementVNode)("div",{onClick:t[0]||(t[0]=e=>n.view=!n.view),class:"title"},[(0,o.createCommentVNode)(' <div class="label">{{ label }}</div> '),n.view?(0,o.createCommentVNode)("v-if",!0):((0,o.openBlock)(),(0,o.createElementBlock)("div",i,[(0,o.createTextVNode)((0,o.toDisplayString)(m.src.uid)+" : "+(0,o.toDisplayString)(m.src.type)+" : ",1),(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createElementBlock)("div",c,[(0,o.createTextVNode)((0,o.toDisplayString)(m.src.url),1)])),[[h,m.src.url]])]))]),n.view?((0,o.openBlock)(),(0,o.createElementBlock)("div",r,[(0,o.createElementVNode)("div",d,[(0,o.createElementVNode)("div",null,(0,o.toDisplayString)(m.src.type)+" : "+(0,o.toDisplayString)(m.src.name||m.src.uid),1),(0,o.createElementVNode)("div",null,[(0,o.createElementVNode)("button",{onClick:t[1]||(t[1]=t=>e.$emit("remove",l.asset))},[(0,o.createVNode)(u,{value:"bin",size:"1em"})])])]),(0,o.createCommentVNode)(' <div class="assetrow">\r\n                <div>URL:</div>\r\n                <div class="rowcontent">\r\n                    <LabelEdit :value="src.url"></LabelEdit>\r\n                </div>\r\n            </div> '),(0,o.createCommentVNode)(' <div class="assetrow" v-for="(param, key) in src.parameters">\r\n            <div>{{ key }}</div><div>{{ param }}</div>\r\n        </div> '),((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(l.asset.parameters,((e,l)=>((0,o.openBlock)(),(0,o.createElementBlock)("div",p,[(0,o.createElementVNode)("div",null,(0,o.toDisplayString)(l),1),t[2]||(t[2]=(0,o.createElementVNode)("div",{class:"cell"},[(0,o.createCommentVNode)(' <LabelEdit @update:value="asset.parameters[key] = $event; $emit(\'changed\')" :value="param">\r\n                    </LabelEdit> ')],-1))])))),256))])):(0,o.createCommentVNode)("v-if",!0)])}],["__scopeId","data-v-171e47dc"]]),v={name:"AssetsView",data:()=>({selectedAsset:null,assetsData:{offtypes:["hdr"]}}),props:{selected:{type:Object}},methods:{async removeAsset(e){await this.$app.elements.removeAsset(this.selected,e),this.$app.toasts.add({message:"Ресурс удален из модели"})},saveProp(){this.$app.toasts.add({message:"Параметр ресурса в элементе изменен"}),this.$app.engine.getManager().UpdateElement(this.selected.path,{assets:this.selected.assets})},async selectAsset(){const e=await this.$app.assets.selectAsset(["hdr","texture"]),t=this.$app.engine.getManager("AssetsManager").GetAsset(e.uid);await this.$app.elements.addAsset(this.selected,t),this.$app.toasts.add({message:"Ресурс добавлен в модель"})}},computed:{list(){return this.selected.data?.assets||this.selected.assets||[]}},components:{AssetView:h}},k=(0,u.A)(v,[["render",function(e,t,l,a,i,c){const r=(0,o.resolveComponent)("AssetView"),d=(0,o.resolveComponent)("icon"),p=(0,o.resolveDirective)("tooltip");return(0,o.openBlock)(),(0,o.createElementBlock)("div",s,[t[1]||(t[1]=(0,o.createElementVNode)("div",null,"Ресурсы",-1)),((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(c.list,((e,t)=>((0,o.openBlock)(),(0,o.createBlock)(r,{asset:e,key:t,onRemove:c.removeAsset,onChanged:c.saveProp},null,8,["asset","onRemove","onChanged"])))),128)),(0,o.createElementVNode)("div",n,[(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createElementBlock)("button",{class:"button normal",onClick:t[0]||(t[0]=(...e)=>c.selectAsset&&c.selectAsset(...e))},[(0,o.createVNode)(d,{value:"stack",size:"0.75em"})])),[[p,"Ресурсы"]])])])}]])},2135:(e,t,l)=>{l.d(t,{A:()=>g});var o=l(2655);const s={class:"treecontainer"},n={class:"roottree"},a={class:"tree-node"},i={class:"tree-node-content"},c={class:"selector"},r=["checked"],d={key:0,class:"prepender"},p=["title"],m={key:1,class:"appender"},u={key:0,class:"children"},h={key:1};function v(e,t){for(let l=0;l<e.length;l++)e[l].isSelected=t,e[l].children&&v(e[l].children,t)}const k={name:"TreeNode",props:{node:{type:Object,required:!0},selector:{type:Boolean,default:!0},index:{type:Number},focused:{type:Boolean,default:!1},childsFiled:{type:String,default:"childrens"}},data:()=>({expanded:{},childloaded:{},isLoading:!1,selectChangeEvent:(0,o.inject)("selectChangeEvent",null),clickNodeEvent:(0,o.inject)("clickNodeEvent",null)}),methods:{async toggleExpand(){this.node[this.childsFiled]&&0!==this.node[this.childsFiled].length&&(this.expanded[this.node.uid]=!this.expanded[this.node.uid],this.expanded[this.node.uid]&&!this.childloaded[this.node.uid]&&await this.loadChildren(),this.$emit("updateExpanded",this.node))},async loadChildren(){this.childloaded[this.node.uid]=!0},onChildSelectChange(e){},onCheckboxChange(e){e.isSelected=!e.isSelected,e[this.childsFiled]?.length&&v(e[this.childsFiled],e.isSelected),this.selectChangeEvent(this.node),this.$emit("changeSelection",this.node)},selectNode(e){this.clickNodeEvent(this.node)}}};var y=l(6262);const E={components:{TreeNode:(0,y.A)(k,[["render",function(e,t,l,s,n,v){const k=(0,o.resolveComponent)("TreeNode",!0);return(0,o.openBlock)(),(0,o.createElementBlock)("li",a,[(0,o.createElementVNode)("div",i,[(0,o.createElementVNode)("span",{class:"collapser",onClick:t[0]||(t[0]=(...e)=>v.toggleExpand&&v.toggleExpand(...e))},[l.node[l.childsFiled]?.length?(0,o.renderSlot)(e.$slots,"icon",{key:0,node:l.node},(()=>[(0,o.createTextVNode)((0,o.toDisplayString)(n.expanded[l.node.uid]?"▼":"▶"),1)]),!0):(0,o.createCommentVNode)("v-if",!0)]),(0,o.createElementVNode)("span",c,[l.selector?(0,o.renderSlot)(e.$slots,"checkbox",{key:0},(()=>[(0,o.createElementVNode)("input",{ref:"checkedInput",type:"checkbox",onChange:t[1]||(t[1]=e=>v.onCheckboxChange(l.node)),checked:l.node.isSelected},null,40,r)]),!0):(0,o.createCommentVNode)("v-if",!0)]),e.$slots.prepend?((0,o.openBlock)(),(0,o.createElementBlock)("span",d,[(0,o.renderSlot)(e.$slots,"prepend",{node:l.node},void 0,!0)])):(0,o.createCommentVNode)("v-if",!0),(0,o.createElementVNode)("span",{class:"labeler",title:l.node.uid,onClick:t[2]||(t[2]=(...e)=>v.selectNode&&v.selectNode(...e))},[(0,o.renderSlot)(e.$slots,"label",{node:l.node},(()=>[(0,o.createElementVNode)("span",null,(0,o.toDisplayString)(l.node.uid)+"|",1)]),!0)],8,p),e.$slots.append?((0,o.openBlock)(),(0,o.createElementBlock)("span",m,[(0,o.renderSlot)(e.$slots,"append",{node:l.node,index:l.index},void 0,!0)])):(0,o.createCommentVNode)("v-if",!0)]),n.expanded[l.node.uid]&&Array.isArray(l.node[l.childsFiled])&&l.node[l.childsFiled].length?((0,o.openBlock)(),(0,o.createElementBlock)("ul",u,[n.childloaded[l.node.uid]?((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,{key:0},(0,o.renderList)(l.node[l.childsFiled],(t=>((0,o.openBlock)(),(0,o.createBlock)(k,{onChangeSelection:v.onChildSelectChange,selector:l.selector,focused:t.focused,key:t.uid,node:t},(0,o.createSlots)({_:2},[(0,o.renderList)(e.$slots,((t,l)=>({name:l,fn:(0,o.withCtx)((t=>[(0,o.renderSlot)(e.$slots,l,(0,o.mergeProps)({ref_for:!0},t),void 0,!0)]))})))]),1032,["onChangeSelection","selector","focused","node"])))),128)):((0,o.openBlock)(),(0,o.createElementBlock)("div",h," load... "))])):(0,o.createCommentVNode)("v-if",!0)])}],["__scopeId","data-v-261e9d42"]])},props:{tree:{type:Array,required:!0},selector:{type:Boolean,default:!0},focused:{type:Boolean,default:!1},childsFiled:{type:String,default:"children"}},setup(e,{slots:t,emit:l}){(0,o.provide)("clickNodeEvent",(e=>{l("clickNode",e)})),(0,o.provide)("selectChangeEvent",(e=>{l("changeSelect",e)}))},methods:{onUpdateExpanded(e){const t=this.findNodeByUid(this.tree,e.uid);t&&(t.expanded=e.expanded),this.$emit("updateExpanded",e)},findNodeByUid(e,t){for(let l of e){if(l.uid===t)return l;if(l.children){let e=this.findNodeByUid(l.children,t);if(e)return e}}return null}}},g=(0,y.A)(E,[["render",function(e,t,l,a,i,c){const r=(0,o.resolveComponent)("TreeNode");return(0,o.openBlock)(),(0,o.createElementBlock)("div",s,[(0,o.createElementVNode)("ul",n,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(l.tree,((t,s)=>((0,o.openBlock)(),(0,o.createBlock)(r,{key:t.uid,selector:l.selector,node:t,index:s,focused:l.focused,childsFiled:l.childsFiled,onUpdateExpanded:c.onUpdateExpanded},(0,o.createSlots)({_:2},[(0,o.renderList)(e.$slots,((t,l)=>({name:l,fn:(0,o.withCtx)((t=>[(0,o.renderSlot)(e.$slots,l,(0,o.mergeProps)({ref_for:!0},t),void 0,!0)]))})))]),1032,["selector","node","index","focused","childsFiled","onUpdateExpanded"])))),128))])])}],["__scopeId","data-v-4c9e3d2a"]])},2474:(e,t,l)=>{l.r(t),l.d(t,{ActionEdit:()=>_l,ActionItem:()=>At,ActionsLib:()=>Ct,AssetEdit:()=>rl,BoolEdit:()=>Ae,CustomInput:()=>Q,EditColor:()=>kt,EulerBlock:()=>it,ExpandedButton:()=>r,ExtMenu:()=>W,FloatInput:()=>Oe,FloatValue:()=>Pe.A,Icon:()=>u,Importer:()=>fl,Int:()=>Ie,ItemsLib:()=>Ut,Label:()=>gt,LabelEdit:()=>mt,Modal:()=>f,ModuleEdit:()=>Wt,PopupList:()=>N,Selectable:()=>fe,SimpleButton:()=>S,SlideBlock:()=>ie,SlideScroller:()=>X,Spinner:()=>z,Toast:()=>U.A,Toasts:()=>F,ToggleButton:()=>D,TreeLi:()=>ue,V3:()=>We,V3block:()=>et,params:()=>Le,queryform:()=>ne,vlist:()=>we});var o=l(2655);const s={class:"overbutton"},n={class:"menulabel"},a={class:"btnicon"},i={name:"ExpandedButton",props:{label:"",icon:"",color:"rgb(0,0,0)"}};var c=l(6262);const r=(0,c.A)(i,[["render",function(e,t,l,i,c,r){const d=(0,o.resolveComponent)("icon");return(0,o.openBlock)(),(0,o.createElementBlock)("button",s,[(0,o.createElementVNode)("div",n,(0,o.toDisplayString)(l.label),1),(0,o.createElementVNode)("div",a,[(0,o.createVNode)(d,{size:"100%",color:l.color,value:l.icon},null,8,["color","value"])])])}]]),d=["fill","x","href"];var p=l(1291);const m={name:"Icon",props:{value:{type:String,default:()=>"icon-checkmark"},size:{type:String,default:()=>null},color:{type:String,default:()=>null},offset:{type:Number}},computed:{style(){return this.size?{width:`${this.size}`,height:`${this.size}`}:{width:"1em",height:"1em"}},val(){return`${p}#p-${this.value.replace("p-","")}`}}},u=(0,c.A)(m,[["render",function(e,t,l,s,n,a){return(0,o.openBlock)(),(0,o.createElementBlock)("svg",{preserveAspectRatio:"xMidYMid meet",class:"svgicon",style:(0,o.normalizeStyle)(a.style)},[(0,o.createElementVNode)("use",{class:"svguse",width:"100%",height:"100%",viewBox:"0 0 32 32",fill:l.color,x:l.offset,href:a.val},[(0,o.createElementVNode)("title",null,[(0,o.renderSlot)(e.$slots,"default",{},void 0,!0)])],8,d)],4)}],["__scopeId","data-v-1165b5b0"]]),h={class:"modal-header"},v={class:"modal-content"},k=["innerHTML"],y={class:"modal-footer"},E=["disabled","onClick"],g={computed:{modal(){return this.$app.modal},header(){return this.modal.header},content(){return this.modal.content},footer(){return this.modal.footer}},methods:{onSelf(){this.modal.values.closable&&this.modal.close()},onClick(e){"function"==typeof e&&e()},closeModal(e){"function"!=typeof e?this.modal.close():e()}}},f=(0,c.A)(g,[["render",function(e,t,l,s,n,a){return(0,o.openBlock)(),(0,o.createElementBlock)("div",{class:"modal-overlay",onClick:t[3]||(t[3]=(0,o.withModifiers)(((...e)=>a.onSelf&&a.onSelf(...e)),["self"]))},[(0,o.createElementVNode)("div",{class:"modal",onClick:t[2]||(t[2]=(0,o.withModifiers)((()=>{}),["stop"]))},[(0,o.createElementVNode)("header",h,[((0,o.openBlock)(),(0,o.createBlock)((0,o.resolveDynamicComponent)(a.header.component||"div"),(0,o.mergeProps)({class:"header"},a.header.component?a.header:null),{default:(0,o.withCtx)((()=>[(0,o.createElementVNode)("h3",null,(0,o.toDisplayString)(a.header.value),1),(0,o.createElementVNode)("button",{class:"close-btn",onClick:t[0]||(t[0]=e=>a.closeModal(a.header.handler))},"×")])),_:1},16))]),(0,o.createElementVNode)("main",v,[((0,o.openBlock)(),(0,o.createBlock)((0,o.resolveDynamicComponent)(a.content.component||"div"),(0,o.mergeProps)({class:"content"},a.content.component?a.content.props:null,(0,o.toHandlers)(a.content.events||{})),(0,o.createSlots)({default:(0,o.withCtx)((()=>[(0,o.createElementVNode)("div",{class:"content-value",innerHTML:a.content.value||""},null,8,k)])),_:2},[(0,o.renderList)(a.content.slots,((e,t)=>({name:t,fn:(0,o.withCtx)((t=>[((0,o.openBlock)(),(0,o.createBlock)((0,o.resolveDynamicComponent)(e.component),(0,o.mergeProps)(t,(0,o.toHandlers)(e.events||{})),null,16))]))})))]),1040))]),(0,o.createElementVNode)("footer",y,[((0,o.openBlock)(),(0,o.createBlock)((0,o.resolveDynamicComponent)(a.footer.component||"div"),(0,o.mergeProps)({class:"footer"},a.footer.component?a.footer.props:null,{onClose:a.closeModal}),{default:(0,o.withCtx)((()=>[a.footer.buttons?((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,{key:0},(0,o.renderList)(a.footer.buttons,(e=>((0,o.openBlock)(),(0,o.createElementBlock)("div",null,[e.hidden?(0,o.createCommentVNode)("v-if",!0):((0,o.openBlock)(),(0,o.createElementBlock)("button",{key:0,class:(0,o.normalizeClass)(e.class),disabled:e.disabled,onClick:t=>a.onClick(e.handler)},(0,o.toDisplayString)(e.label||"Close"),11,E))])))),256)):((0,o.openBlock)(),(0,o.createElementBlock)("button",{key:1,class:(0,o.normalizeClass)(a.footer.class),onClick:t[1]||(t[1]=e=>a.closeModal(a.footer.handler))},(0,o.toDisplayString)(a.footer.label||"Close"),3))])),_:1},16,["onClose"]))])])])}],["__scopeId","data-v-b3a8948c"]]),V=["onClick"],B={props:{values:{type:Array},rect:{type:Object},size:{type:Object,default:{width:200,height:100}}},data:()=>({popupStyle:{}}),methods:{togglePopup(e){const t=window.innerWidth;let l=this.rect.top+window.scrollY,o=this.rect.left+window.scrollX;o+this.size.width>t&&(o=this.rect.right-this.size.width+window.scrollX),this.popupStyle={position:"absolute",top:`${l}px`,left:`${o}px`,width:`${this.size.width}px`},this.isPopupVisible=!0},hidePopup(){this.$emit("callback")}}},N=(0,c.A)(B,[["render",function(e,t,l,s,n,a){const i=(0,o.resolveDirective)("tooltip");return(0,o.openBlock)(),(0,o.createElementBlock)("div",{class:"popup",style:(0,o.normalizeStyle)(n.popupStyle)},[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(l.values,((t,l)=>(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createElementBlock)("p",{class:"element",key:l,onClick:l=>t.handler?t.handler(t):e.$emit("click",t)},[((0,o.openBlock)(),(0,o.createBlock)((0,o.resolveDynamicComponent)(t.component||"div"),(0,o.mergeProps)({ref_for:!0},t.props),{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)((0,o.toDisplayString)(t.props),1)])),_:2},1040))],8,V)),[[i,t.tooltip]]))),128)),(0,o.createElementVNode)("button",{onClick:t[0]||(t[0]=(...e)=>a.hidePopup&&a.hidePopup(...e))},"ОК")],4)}],["__scopeId","data-v-1591e2fe"]]),b={key:0,class:"menulabel"},C={key:1,class:"btnicon"},w={name:"SimpleButton",props:{label:{type:String},icon:{type:Object},tooltip:{type:String},handlers:{type:Object,required:!0}},methods:{onClick(){this.handlers?.click?this.handlers.click(this):this.$emit("click",this)}}},S=(0,c.A)(w,[["render",function(e,t,l,s,n,a){const i=(0,o.resolveComponent)("icon"),c=(0,o.resolveDirective)("tooltip");return(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createElementBlock)("button",{class:"small-btn simple",onClick:t[0]||(t[0]=(...e)=>a.onClick&&a.onClick(...e))},[l.label?((0,o.openBlock)(),(0,o.createElementBlock)("div",b,(0,o.toDisplayString)(l.label),1)):(0,o.createCommentVNode)("v-if",!0),l.icon?((0,o.openBlock)(),(0,o.createElementBlock)("div",C,[(0,o.createVNode)(i,{size:l.icon.size||"100%",value:l.icon.value},null,8,["size","value"])])):(0,o.createCommentVNode)("v-if",!0)])),[[c,l.tooltip]])}],["__scopeId","data-v-7f0518be"]]),x={key:0,class:"menulabel"},A={key:1,class:"btnicon"},$={name:"ToggleButton",props:{id:{type:String,required:!0},label:{type:String},icon:{type:Object},group:{type:Object},handlers:{type:Object,required:!0},tooltip:{type:String}},computed:{isActive(){return this.group.activeId===this.id}},mounted(){this.handlers.activate&&this.handlers.activate(this)},beforeUnmount(){this.handlers.deactivate&&this.handlers.deactivate(this)},methods:{onClick(){this.handlers.click?this.handlers.click(this):this.$emit("click",this)}}},D=(0,c.A)($,[["render",function(e,t,l,s,n,a){const i=(0,o.resolveComponent)("icon"),c=(0,o.resolveDirective)("tooltip");return(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createElementBlock)("button",{class:(0,o.normalizeClass)(["small-btn simple",{active:a.isActive}]),onClick:t[0]||(t[0]=(...e)=>a.onClick&&a.onClick(...e))},[l.label?((0,o.openBlock)(),(0,o.createElementBlock)("div",x,(0,o.toDisplayString)(l.label),1)):(0,o.createCommentVNode)("v-if",!0),l.icon?((0,o.openBlock)(),(0,o.createElementBlock)("div",A,[(0,o.createVNode)(i,{size:l.icon.size||"100%",value:l.icon.value},null,8,["size","value"])])):(0,o.createCommentVNode)("v-if",!0)],2)),[[c,l.tooltip]])}],["__scopeId","data-v-673fd16a"]]),T={class:"spinner"},I={name:"Spinner"},z=(0,c.A)(I,[["render",function(e,t,l,s,n,a){return(0,o.openBlock)(),(0,o.createElementBlock)("div",T)}],["__scopeId","data-v-4736cf19"]]),_={class:"toast-container"},M={computed:{list(){return this.$app.toasts.list}},methods:{onClick(e){e.onclick&&e.onclick()}}},L=(0,c.A)(M,[["render",function(e,t,l,s,n,a){return(0,o.openBlock)(),(0,o.createElementBlock)("div",_,[(0,o.createVNode)(o.TransitionGroup,{name:"toast",tag:"div"},{default:(0,o.withCtx)((()=>[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(a.list,(t=>((0,o.openBlock)(),(0,o.createElementBlock)("div",{key:t.id,class:"toast"},[((0,o.openBlock)(),(0,o.createBlock)((0,o.resolveDynamicComponent)(t.component||"div"),(0,o.mergeProps)({class:"toastview",ref_for:!0},t.data,{onClick:e=>a.onClick(t)}),{default:(0,o.withCtx)((()=>[t.component?(0,o.createCommentVNode)("v-if",!0):(0,o.renderSlot)(e.$slots,"default",{key:0},(()=>[(0,o.createTextVNode)((0,o.toDisplayString)(t.data.message),1)]),!0)])),_:2},1040,["onClick"]))])))),128))])),_:3})])}],["__scopeId","data-v-3aed840a"]]),F=L;var U=l(8092);const j={class:"slide-scroller",ref:"scroller"},O=["onClick"],P=["src"],q={class:"title"},R={props:{slides:{type:Array,required:!0}},data:()=>({selectedIndex:0,translateX:0}),mounted(){this.centerSelectedImage()},watch:{selectedIndex(){this.centerSelectedImage()}},methods:{addSlide(){this.$emit("addslide")},selectImage(e){this.selectedIndex=e,this.$emit("slideselect",this.slides[e].uid)},centerSelectedImage(){this.$nextTick((()=>{const e=this.$refs.scroller.offsetWidth,t=this.$refs.scroller.querySelector(".slide-item.selected");if(t){const l=t.offsetWidth,o=t.offsetLeft;this.translateX=-(o-e/2+l/2)}}))}}},X=(0,c.A)(R,[["render",function(e,t,l,s,n,a){return(0,o.openBlock)(),(0,o.createElementBlock)("div",j,[(0,o.createElementVNode)("div",{class:"slide-container",style:(0,o.normalizeStyle)({transform:`translateX(${n.translateX}px)`})},[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(l.slides,((e,t)=>((0,o.openBlock)(),(0,o.createElementBlock)("div",{key:t,class:(0,o.normalizeClass)(["slide-item",{selected:n.selectedIndex===t}]),onClick:e=>a.selectImage(t)},[(0,o.createElementVNode)("img",{src:e.preview,alt:"Image"},null,8,P),(0,o.createElementVNode)("div",q,(0,o.toDisplayString)(e.uid),1)],10,O)))),128)),(0,o.createElementVNode)("div",{class:"slide-item",onClick:t[0]||(t[0]=e=>a.addSlide())},t[1]||(t[1]=[(0,o.createElementVNode)("img",{src:"cardbg",alt:"Image"},null,-1)]))],4)],512)}],["__scopeId","data-v-dafd9036"]]),G={class:"menu-container"},H={key:0,class:"menublock"},Y={name:"ExtMenu",props:{list:{type:Array,default:[]},actived:{type:String}},computed:{menu(){return this.$app.menu}},methods:{onClick(e){const t=this.list.find((e=>e.id===this.actived));t&&(t.handlers?.disable?.(),t===e)?this.$emit("activate",null):(e.handler?.(e)||e.handlers?.enable?.(e)||this.$emit("click",e),this.$emit("activate",e))}}},W=(0,c.A)(Y,[["render",function(e,t,l,s,n,a){const i=(0,o.resolveComponent)("ExpandedButton");return(0,o.openBlock)(),(0,o.createElementBlock)("div",G,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(l.list,((e,t)=>((0,o.openBlock)(),(0,o.createElementBlock)("div",{key:t,class:(0,o.normalizeClass)([e.class,"menu-item"])},[e.hidden?(0,o.createCommentVNode)("v-if",!0):((0,o.openBlock)(),(0,o.createElementBlock)("div",H,[(0,o.createVNode)(i,{onClick:(0,o.withModifiers)((t=>a.onClick(e)),["stop"]),label:e.label,color:e.id&&l.actived===e.id?"#ffff00":null,icon:e.icon},null,8,["onClick","label","color","icon"])]))],2)))),128))])}]]),K={class:"input-wrapper"},J=["type","value","placeholder"],Z={name:"MinimalInput",props:{type:{type:String,default:"text"},value:{type:[String,Number],default:""},placeholder:{type:String,default:""}},emits:["update:value"]},Q=(0,c.A)(Z,[["render",function(e,t,l,s,n,a){return(0,o.openBlock)(),(0,o.createElementBlock)("div",K,[(0,o.createElementVNode)("input",{type:l.type,value:l.value,onInput:t[0]||(t[0]=t=>e.$emit("update:value",t.target.value)),placeholder:l.placeholder,class:"input-field"},null,40,J)])}],["__scopeId","data-v-2c548edc"]]),ee={class:"container"},te={class:"label"},le={class:"value"},oe=["onUpdate:modelValue"],se={props:{values:{type:Object,require:!0}},emits:["update:values"],computed:{}},ne=(0,c.A)(se,[["render",function(e,t,l,s,n,a){return(0,o.openBlock)(),(0,o.createElementBlock)("div",ee,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(l.values,((e,t)=>((0,o.openBlock)(),(0,o.createElementBlock)("div",{key:t,class:"block"},[(0,o.createElementVNode)("div",te,(0,o.toDisplayString)(e.label),1),(0,o.createElementVNode)("div",le,[(0,o.withDirectives)((0,o.createElementVNode)("input",{"onUpdate:modelValue":t=>e.value=t},null,8,oe),[[o.vModelText,e.value]])])])))),128))])}],["__scopeId","data-v-2b60153b"]]),ae={name:"SliderBlock",props:{value:{type:Boolean,default:()=>!1},property:{type:String,default:"top"},shift:{type:Number,default:100},zero:{type:Number,default:0}},computed:{style(){return{[this.property]:this.value?`${this.shift}px`:`${this.zero}px`}}},mounted(){"right"===this.property||"left"===this.property?this.$el.style.width=this.shift-this.zero+"px":this.$el.style.height=this.shift-this.zero+"px"}},ie=(0,c.A)(ae,[["render",function(e,t,l,s,n,a){return(0,o.openBlock)(),(0,o.createElementBlock)("div",{class:"slider",style:(0,o.normalizeStyle)(a.style)},[(0,o.renderSlot)(e.$slots,"default",{},void 0,!0),(0,o.createElementVNode)("div",{onClick:t[0]||(t[0]=t=>e.$emit("revert"))},[(0,o.renderSlot)(e.$slots,"button",{},void 0,!0)])],4)}],["__scopeId","data-v-b3fc2cec"]]),ce={key:0},re={key:1},de={key:2,class:"child-list"},pe={key:0},me={name:"TreeLi",props:["value"],data:()=>({childshow:!1})},ue=(0,c.A)(me,[["render",function(e,t,l,s,n,a){const i=(0,o.resolveComponent)("TreeLi",!0);return(0,o.openBlock)(),(0,o.createElementBlock)("li",null,[l.value.children?(0,o.createCommentVNode)("v-if",!0):((0,o.openBlock)(),(0,o.createElementBlock)("div",ce,t[1]||(t[1]=[(0,o.createElementVNode)("svg",{class:"edicon ics-spinner10"},[(0,o.createElementVNode)("use",{"xlink:href":"#ics-spinner10"})],-1)]))),l.value.children?((0,o.openBlock)(),(0,o.createElementBlock)("div",de,[(0,o.createElementVNode)("span",{onClick:t[0]||(t[0]=t=>e.childshow=!e.childshow)},[t[3]||(t[3]=(0,o.createElementVNode)("input",{type:"checkbox"},null,-1)),(0,o.createTextVNode)((0,o.toDisplayString)(l.value.name),1)]),e.childshow?((0,o.openBlock)(),(0,o.createElementBlock)("ul",pe,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(l.value.children,((e,t)=>((0,o.openBlock)(),(0,o.createBlock)(i,{key:t,value:e},null,8,["value"])))),128))])):(0,o.createCommentVNode)("v-if",!0)])):((0,o.openBlock)(),(0,o.createElementBlock)("span",re,[t[2]||(t[2]=(0,o.createElementVNode)("input",{type:"checkbox"},null,-1)),(0,o.createTextVNode)((0,o.toDisplayString)(l.value.name),1)]))])}],["__scopeId","data-v-562df7a6"]]),he={class:"selectable-container"},ve={class:"list"},ke={class:"grid"},ye=["onClick"],Ee={key:0,class:"info"},ge={name:"ActionsLib",data:()=>({current:null}),props:{list:{type:Array},selected:{type:Object}},watch:{selected(e,t){this.current=e}},emits:["selectItem"],methods:{onItemSelect(e){this.$emit("selectItem",e)}}},fe=(0,c.A)(ge,[["render",function(e,t,l,s,n,a){return(0,o.openBlock)(),(0,o.createElementBlock)("div",he,[(0,o.createElementVNode)("div",ve,[(0,o.createElementVNode)("div",ke,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(l.list,((t,l)=>((0,o.openBlock)(),(0,o.createElementBlock)("div",{onClick:e=>a.onItemSelect(t),class:"grid-element",key:l},[(0,o.renderSlot)(e.$slots,"item",{item:t})],8,ye)))),128))])]),n.current?((0,o.openBlock)(),(0,o.createElementBlock)("div",Ee,[(0,o.renderSlot)(e.$slots,"selected",{item:n.current})])):(0,o.createCommentVNode)("v-if",!0)])}]]),Ve={class:"vlist-container"},Be={class:"list"},Ne={class:"vlist"},be=["onClick"],Ce={name:"ActionsLib",data:()=>({current:null}),props:{list:{type:Array},selected:{type:Object}},watch:{selected(e,t){this.current=e}},emits:["selectItem"],methods:{onItemSelect(e){this.$emit("selectItem",e)}}},we=(0,c.A)(Ce,[["render",function(e,t,l,s,n,a){return(0,o.openBlock)(),(0,o.createElementBlock)("div",Ve,[(0,o.createElementVNode)("div",Be,[(0,o.createElementVNode)("div",Ne,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(l.list,((t,l)=>((0,o.openBlock)(),(0,o.createElementBlock)("div",{onClick:e=>a.onItemSelect(t),class:"vlist-element",key:l},[(0,o.renderSlot)(e.$slots,"item",{item:t})],8,be)))),128))])])])}]]),Se={style:{display:"flex","justify-content":"space-between"}},xe={name:"BoolEdit",props:["value","label","selected"],computed:{val:{get(){return this.value},set(e){this.$emit("update:value",e)}}}},Ae=(0,c.A)(xe,[["render",function(e,t,l,s,n,a){return(0,o.openBlock)(),(0,o.createElementBlock)("div",Se,[(0,o.createElementVNode)("div",null,(0,o.toDisplayString)(l.label),1),(0,o.createElementVNode)("div",null,[(0,o.withDirectives)((0,o.createElementVNode)("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=e=>a.val=e)},null,512),[[o.vModelCheckbox,a.val]])])])}]]),$e={class:"input-float"},De=["value","step"],Te={name:"input-float",props:["value","step","label"],methods:{onWheel(){},onChange(){}}},Ie=(0,c.A)(Te,[["render",function(e,t,l,s,n,a){return(0,o.openBlock)(),(0,o.createElementBlock)("div",$e,[(0,o.createElementVNode)("span",null,(0,o.toDisplayString)(l.label),1),(0,o.createElementVNode)("div",null,[(0,o.createElementVNode)("input",{value:l.value,type:"number",step:l.step,onInput:t[0]||(t[0]=t=>e.$emit("update:value",parseFloat(t.target.value)))},null,40,De)]),(0,o.createCommentVNode)('<input s  \r\n    v-bind:value="value"\r\n    type="number"\r\n    :step="step"\r\n    @mousewheel="onWheel"\r\n    @input="$emit(\'input\', parseFloat($event.target.value) || value)"\r\n  />')])}]]),ze=["onUpdate:modelValue"],_e=["onUpdate:modelValue"],Me={name:"NameEditor",data:()=>({properties:[{property:"envMap",value:null}]}),methods:{updateAsset(){for(let e=0;e<this.properties.length;e++){const t=this.properties[e];this.selected[t.property],this.$app.assets.updateAsset(this.selected,t.property,(()=>{}))}}},props:{selected:{type:Object}}},Le=(0,c.A)(Me,[["render",function(e,t,l,s,n,a){return(0,o.openBlock)(),(0,o.createElementBlock)("div",null,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(n.properties,(e=>((0,o.openBlock)(),(0,o.createElementBlock)("div",null,[(0,o.withDirectives)((0,o.createElementVNode)("input",{"onUpdate:modelValue":t=>e.property=t},null,8,ze),[[o.vModelText,e.property]]),(0,o.withDirectives)((0,o.createElementVNode)("input",{"onUpdate:modelValue":t=>l.selected[e.property]=t},null,8,_e),[[o.vModelText,l.selected[e.property]]])])))),256)),(0,o.createElementVNode)("div",null,[(0,o.createElementVNode)("button",{class:"btn",onClick:t[0]||(t[0]=(...e)=>a.updateAsset&&a.updateAsset(...e))},"Update")])])}]]),Fe={class:"comma-number-input-wrapper"},Ue={class:"arrow-buttons"},je={name:"CommaNumberInput",props:{value:Number,step:{type:Number,default:1},min:{type:Number,default:Number.MIN_SAFE_INTEGER},max:{type:Number,default:Number.MAX_SAFE_INTEGER},decimals:{type:Number,default:2}},data:()=>({interval:null,separator:",",isPressed:!1,changeSpeed:100}),computed:{formattedValue:{get(){return this.value||0},set(e){this.$emit("changed",this.parseNumber(e))}}},mounted(){const e=(new Intl.NumberFormat).format(this.value);this.separator=e.charAt(1),this.$refs.input.addEventListener("wheel",this.onWheel,{passive:!1})},beforeDestroy(){this.$refs.input.removeEventListener("wheel",this.onWheel)},methods:{onFocus(){this.$nextTick((()=>{this.$refs.input.select()}))},parseNumber:e=>parseFloat(e.replace(",","."))||0,formatNumber(e){return parseFloat(e).toFixed(this.decimals).replace(".",",")},onInput(e){this.$emit("changed",this.parseNumber(e.target.value))},onWheel(e){e.preventDefault(),e.stopPropagation(),document.activeElement===this.$refs.input&&this.changeValue(e.deltaY>0?-this.step:this.step)},onKeyDown(e){"ArrowUp"===e.key?(this.changeValue(this.step),e.preventDefault()):"ArrowDown"===e.key&&(this.changeValue(-this.step),e.preventDefault())},changeValue(e){let t=(this.value||0)+e;t=Math.max(Math.min(t,this.max),this.min),this.$emit("changed",parseFloat(t.toFixed(this.decimals)))},startIncrement(){this.interval&&clearInterval(this.interval),this.isPressed=!0,this.changeValue(this.step),setTimeout((()=>{this.isPressed&&(this.interval=setInterval((()=>this.changeValue(this.step)),50))}),400)},startDecrement(){this.interval&&clearInterval(this.interval),this.isPressed=!0,this.changeValue(-this.step),setTimeout((()=>{this.isPressed&&(this.interval=setInterval((()=>this.changeValue(-this.step)),50))}),400)},stopChange(){this.isPressed=!1,clearInterval(this.interval)}}},Oe=(0,c.A)(je,[["render",function(e,t,l,s,n,a){return(0,o.openBlock)(),(0,o.createElementBlock)("div",Fe,[(0,o.withDirectives)((0,o.createElementVNode)("input",{ref:"input",type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>a.formattedValue=e),onKeydown:t[1]||(t[1]=(...e)=>a.onKeyDown&&a.onKeyDown(...e)),onDblclick:t[2]||(t[2]=(...e)=>a.onFocus&&a.onFocus(...e)),class:"comma-number-input"},null,544),[[o.vModelText,a.formattedValue]]),(0,o.createElementVNode)("div",Ue,[(0,o.createElementVNode)("button",{onMousedown:t[3]||(t[3]=(...e)=>a.startIncrement&&a.startIncrement(...e)),onMouseup:t[4]||(t[4]=(...e)=>a.stopChange&&a.stopChange(...e)),onMouseleave:t[5]||(t[5]=(...e)=>a.stopChange&&a.stopChange(...e))},"▲",32),(0,o.createElementVNode)("button",{onMousedown:t[6]||(t[6]=(...e)=>a.startDecrement&&a.startDecrement(...e)),onMouseup:t[7]||(t[7]=(...e)=>a.stopChange&&a.stopChange(...e)),onMouseleave:t[8]||(t[8]=(...e)=>a.stopChange&&a.stopChange(...e))},"▼",32)])])}]]);var Pe=l(8475);const qe={style:{display:"flex",gap:"7px"}},Re={style:{display:"flex",gap:"3px"}},Xe={style:{display:"flex",gap:"3px"}},Ge={style:{display:"flex",gap:"3px"}};var He=l(125);const Ye={props:{values:{type:Object,default:new He.Vector3},decimals:{type:Number,default:4},step:{type:Number,default:1}},methods:{updateValue(e,t){"number"==typeof t&&(this.values[e]=t,this.$emit("update:values",this.values))}}},We=(0,c.A)(Ye,[["render",function(e,t,l,s,n,a){const i=(0,o.resolveComponent)("FloatInput");return(0,o.openBlock)(),(0,o.createElementBlock)("div",qe,[(0,o.createElementVNode)("div",Re,[t[3]||(t[3]=(0,o.createElementVNode)("label",{style:{"font-size":"1.2em"}},"x",-1)),(0,o.createVNode)(i,{value:l.values.x,decimals:l.decimals,step:l.step,onChanged:t[0]||(t[0]=e=>a.updateValue("x",e))},null,8,["value","decimals","step"])]),(0,o.createElementVNode)("div",Xe,[t[4]||(t[4]=(0,o.createElementVNode)("label",{style:{"font-size":"1.2em"}},"y",-1)),(0,o.createVNode)(i,{value:l.values.y,decimals:l.decimals,step:l.step,onChanged:t[1]||(t[1]=e=>a.updateValue("y",e))},null,8,["value","decimals","step"])]),(0,o.createElementVNode)("div",Ge,[t[5]||(t[5]=(0,o.createElementVNode)("label",{style:{"font-size":"1.2em"}},"z",-1)),(0,o.createVNode)(i,{value:l.values.z,decimals:l.decimals,step:l.step,onChanged:t[2]||(t[2]=e=>a.updateValue("z",e))},null,8,["value","decimals","step"])])])}]]),Ke={style:{display:"flex","align-items":"center",gap:"1px","flex-direction":"column"}},Je={key:0,class:"tools"},Ze={key:1,class:"titleinfo"},Qe={data:()=>({expanded:!0}),props:{label:String,values:{type:Object,default:new He.Vector3},decimals:{type:Number,default:2},step:{type:Number,default:1}},watch:{values(e,t){}}},et=(0,c.A)(Qe,[["render",function(e,t,l,s,n,a){const i=(0,o.resolveComponent)("V3");return(0,o.openBlock)(),(0,o.createElementBlock)("div",Ke,[(0,o.createElementVNode)("div",{class:(0,o.normalizeClass)(["title",n.expanded?"":"min"])},[(0,o.createElementVNode)("div",{class:"label",onClick:t[0]||(t[0]=e=>n.expanded=!n.expanded)},(0,o.toDisplayString)(n.expanded?"▼":"▶")+" "+(0,o.toDisplayString)(l.label),1),n.expanded?((0,o.openBlock)(),(0,o.createElementBlock)("div",Je,[(0,o.renderSlot)(e.$slots,"tools",{},void 0,!0)])):((0,o.openBlock)(),(0,o.createElementBlock)("div",Ze,"x:"+(0,o.toDisplayString)(l.values.x.toFixed(l.decimals))+",y:"+(0,o.toDisplayString)(l.values.y.toFixed(l.decimals))+",z:"+(0,o.toDisplayString)(l.values.z.toFixed(l.decimals)),1))],2),n.expanded?((0,o.openBlock)(),(0,o.createBlock)(i,{key:0,values:l.values,decimals:l.decimals,step:l.step,"onUpdate:values":t[1]||(t[1]=t=>e.$emit("update:values",t))},null,8,["values","decimals","step"])):(0,o.createCommentVNode)("v-if",!0)])}],["__scopeId","data-v-043ee8ac"]]),tt={style:{display:"flex","align-items":"center",gap:"3px","flex-direction":"column"}},lt={class:"label"},ot={key:0,class:"tools"},st={key:1,class:"titleinfo"};var nt=l(9338);const at={data:()=>({expanded:!0}),props:{quaternion:Object,label:String,values:Object,decimals:{type:Number,default:2},step:{type:Number,default:1}},methods:{onChangeVal(e){e.x>359&&(e.x=0),e.x<-359&&(e.x=0),e.y>359&&(e.y=0),e.y<-359&&(e.y=0),e.z>359&&(e.z=0),e.z<-359&&(e.z=0),this.$emit("update:values",{x:(0,nt.eh)(Math.round(e.x)),y:(0,nt.eh)(Math.round(e.y)),z:(0,nt.eh)(Math.round(e.z))})}},mounted(){},computed:{formattedValue:{get(){return{x:Math.round((0,nt.xW)(this.values.x)),y:Math.round((0,nt.xW)(this.values.y)),z:Math.round((0,nt.xW)(this.values.z))}},set(e){this.$emit("update:values",{x:(0,nt.eh)(Math.round(e.x)),y:(0,nt.eh)(Math.round(e.y)),z:(0,nt.eh)(Math.round(e.z))})}}}},it=(0,c.A)(at,[["render",function(e,t,l,s,n,a){const i=(0,o.resolveComponent)("V3");return(0,o.openBlock)(),(0,o.createElementBlock)("div",tt,[(0,o.createElementVNode)("div",{class:(0,o.normalizeClass)(["title",n.expanded?"":"min"]),onClick:t[0]||(t[0]=e=>n.expanded=!n.expanded)},[(0,o.createElementVNode)("div",lt,(0,o.toDisplayString)(n.expanded?"▼":"▶")+" "+(0,o.toDisplayString)(l.label),1),n.expanded?((0,o.openBlock)(),(0,o.createElementBlock)("div",ot,[(0,o.renderSlot)(e.$slots,"tools",{},void 0,!0)])):((0,o.openBlock)(),(0,o.createElementBlock)("div",st,"x:"+(0,o.toDisplayString)(a.formattedValue.x)+",y:"+(0,o.toDisplayString)(a.formattedValue.y)+",z:"+(0,o.toDisplayString)(a.formattedValue.z),1))],2),n.expanded?((0,o.openBlock)(),(0,o.createBlock)(i,{key:0,values:a.formattedValue,decimals:l.decimals,step:l.step,"onUpdate:values":a.onChangeVal},null,8,["values","decimals","step","onUpdate:values"])):(0,o.createCommentVNode)("v-if",!0)])}],["__scopeId","data-v-4c8a5658"]]),ct={class:"block_container"},rt={key:0,class:"editrow"},dt={class:"label"},pt={name:"LabelEditor",props:["value","editable","label","tooltip"],data:()=>({editMode:!1,val:""}),watch:{value(){this.editMode=!1}},methods:{endEdit(){return this.editMode?(this.editMode=!1,this.val):this.value}}},mt=(0,c.A)(pt,[["render",function(e,t,l,s,n,a){const i=(0,o.resolveComponent)("icon"),c=(0,o.resolveDirective)("tooltip");return(0,o.openBlock)(),(0,o.createElementBlock)("div",null,[(0,o.createElementVNode)("div",ct,[(0,o.createElementVNode)("div",null,(0,o.toDisplayString)(l.label),1),e.editMode?((0,o.openBlock)(),(0,o.createElementBlock)("div",rt,[(0,o.withDirectives)((0,o.createElementVNode)("input",{class:"editinput","onUpdate:modelValue":t[0]||(t[0]=t=>e.val=t)},null,512),[[o.vModelText,e.val]]),(0,o.createVNode)(i,{class:"okicon",value:"checkmark",size:"1em",onClick:t[1]||(t[1]=t=>{e.$emit("update:value",e.val),e.editMode=!1})})])):(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createElementBlock)("div",{class:"editrow",onClick:t[2]||(t[2]=t=>{e.val=l.value,e.editMode=!0}),key:"tooltip-"+l.value},[(0,o.createElementVNode)("span",dt,(0,o.toDisplayString)(l.value),1),(0,o.createVNode)(i,{value:"pencil",size:"1em"})])),[[c,l.tooltip||l.value]])])])}],["__scopeId","data-v-08a6e69f"]]),ut={style:{display:"grid","grid-template-columns":"96px 1fr"}},ht={style:{"text-align":"center"}},vt={name:"EditColor",props:{selected:{type:Object},label:{type:String},values:{type:Object,default:{property:"color"}}},watch:{selected(){this.val=`#${this.$app.project.readElementProp(this.selected.uid,this.values.property).getHexString()}`}},data:()=>({val:"#ffff00"}),mounted(){this.val=`#${this.$app.project.readElementProp(this.selected.uid,this.values.property).getHexString()}`},methods:{updateColor(e){this.selected.properties||(this.selected.properties={}),this.selected.properties[this.values.property]||(this.selected.properties[this.values.property]={type:"Color",args:[e.target.value]}),this.selected.properties[this.values.property]={type:"Color",args:[e.target.value]},this.$app.project.updateElementProps(this.selected.uid,{color:{type:"Color",args:[e.target.value]}}),this.val=`#${this.$app.project.readElementProp(this.selected.uid,this.values.property).getHexString()}`}}},kt=(0,c.A)(vt,[["render",function(e,t,l,s,n,a){return(0,o.openBlock)(),(0,o.createElementBlock)("div",ut,[(0,o.createElementVNode)("div",null,(0,o.toDisplayString)(l.label),1),(0,o.createElementVNode)("div",ht,[(0,o.withDirectives)((0,o.createElementVNode)("input",{style:{width:"100%"},ref:"col",type:"color",id:"colorPicker","onUpdate:modelValue":t[0]||(t[0]=e=>n.val=e),onInput:t[1]||(t[1]=(...e)=>a.updateColor&&a.updateColor(...e))},null,544),[[o.vModelText,n.val]])])])}]]),yt={style:{display:"grid","grid-template-columns":"96px 1fr"}},Et={name:"Label",props:{label:{type:String},selected:{type:Object}}},gt=(0,c.A)(Et,[["render",function(e,t,l,s,n,a){return(0,o.openBlock)(),(0,o.createElementBlock)("div",yt,[(0,o.createElementVNode)("div",null,(0,o.toDisplayString)(l.label),1),(0,o.createElementVNode)("div",null,(0,o.toDisplayString)(l.selected.type),1)])}]]),ft={class:"textwrap w100 tcenter"},Vt={class:"textwrap w100 tcenter"},Bt={key:0,style:{"min-width":"256px",height:"100%",display:"flex","justify-content":"center","align-items":"center"}},Nt={tweens:"move-up"},bt={name:"ActionsLib",props:{selected:{type:Object},regbusy:!1,register:{type:Array}},data:()=>({current:null}),computed:{actions(){return this.$app.actions}},emits:["selectItem"],methods:{onAssetEdit(e,t){this.current[e],this.current[e]=t},getTypeIcon:e=>Nt[e],checkType:e=>typeof e,select(e){this.current=e,this.$emit("selectItem",e)},endEdit(){this.$refs.assetEditor.end()}}},Ct=(0,c.A)(bt,[["render",function(e,t,l,s,n,a){const i=(0,o.resolveComponent)("spinner"),c=(0,o.resolveComponent)("queryform"),r=(0,o.resolveComponent)("Selectable"),d=(0,o.resolveDirective)("tooltip");return(0,o.openBlock)(),(0,o.createBlock)(o.Teleport,{to:".modal-content"},[(0,o.createVNode)(r,{onSelectItem:a.select,list:a.actions.library,selected:l.selected},(0,o.createSlots)({item:(0,o.withCtx)((({item:e})=>[(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createElementBlock)("div",ft,[(0,o.createTextVNode)((0,o.toDisplayString)(e.component),1)])),[[d,e.component]]),(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createElementBlock)("div",Vt,[(0,o.createTextVNode)((0,o.toDisplayString)(e.type),1)])),[[d,e.type]])])),_:2},[l.register?{name:"selected",fn:(0,o.withCtx)((({item:e})=>[l.regbusy?((0,o.openBlock)(),(0,o.createElementBlock)("div",Bt,[(0,o.createVNode)(i)])):((0,o.openBlock)(),(0,o.createBlock)(c,{key:1,values:l.register},null,8,["values"]))])),key:"0"}:void 0]),1032,["onSelectItem","list","selected"])])}]]),wt={class:"itemElement"},St={class:"itemrow"},xt={props:{item:{type:Object}}},At=(0,c.A)(xt,[["render",function(e,t,l,s,n,a){return(0,o.openBlock)(),(0,o.createElementBlock)("div",wt,[(0,o.createElementVNode)("div",St,(0,o.toDisplayString)(l.item.name),1)])}]]),$t={class:"container"},Dt={class:"list-container"},Tt={class:"grid"},It=["onClick"],zt={class:"textwrap w100 tcenter"},_t={class:"textwrap w100"},Mt={style:{display:"flex","justify-content":"center"}},Lt={key:0,class:"extension"},Ft={name:"ItemsLib",props:{selected:{type:Object},list:{type:Array},options:{type:Object,default:{id:"uid",name:"name",icon:"icon",icontip:"tooltip"}}}},Ut=(0,c.A)(Ft,[["render",function(e,t,l,s,n,a){const i=(0,o.resolveComponent)("icon"),c=(0,o.resolveDirective)("tooltip");return(0,o.openBlock)(),(0,o.createElementBlock)("div",$t,[(0,o.createElementVNode)("div",Dt,[(0,o.createElementVNode)("div",Tt,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(l.list,((t,s)=>((0,o.openBlock)(),(0,o.createElementBlock)("div",{onClick:l=>e.$emit("select",t),class:(0,o.normalizeClass)([{selected:l.selected===t},"grid-element"])},[(0,o.renderSlot)(e.$slots,"item",{item:t},(()=>[(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createElementBlock)("div",zt,[(0,o.createTextVNode)((0,o.toDisplayString)(t[l.options.name]||t[l.options.id]),1)])),[[c,t[l.options.name]||t[l.options.id]]]),(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createElementBlock)("div",_t,[(0,o.createTextVNode)((0,o.toDisplayString)(t.url),1)])),[[c,t.url]]),(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createElementBlock)("div",Mt,[(0,o.createVNode)(i,{value:t[l.options.icon],size:"2em"},null,8,["value"])])),[[c,t[l.options.icontip]]])]),!0)],10,It)))),256))])]),l.selected?((0,o.openBlock)(),(0,o.createElementBlock)("div",Lt,[(0,o.renderSlot)(e.$slots,"edit",{selected:l.selected},(()=>[(0,o.createTextVNode)((0,o.toDisplayString)(e.$slots),1)]),!0)])):(0,o.createCommentVNode)("v-if",!0)])}],["__scopeId","data-v-0b85dddc"]]),jt={class:"form-container"},Ot={class:"info"},Pt={class:"row"},qt={class:"rowvalue"},Rt={class:"row"},Xt={class:"rowvalue"},Gt={class:"row"},Ht={class:"rowvalue"},Yt={name:"ModuleEdit",props:{current:{type:Object,default:{name:"-"}}},methods:{onEdit(e,t){this.$emit("edit",e,t)}}},Wt=(0,c.A)(Yt,[["render",function(e,t,l,s,n,a){const i=(0,o.resolveComponent)("LabelEdit");return(0,o.openBlock)(),(0,o.createElementBlock)("div",jt,[(0,o.createElementVNode)("div",Ot,[(0,o.createElementVNode)("div",Pt,[t[3]||(t[3]=(0,o.createElementVNode)("div",{class:"rowlabel"},"Имя",-1)),(0,o.createElementVNode)("div",qt,[(0,o.createVNode)(i,{style:{width:"100%"},"onUpdate:value":t[0]||(t[0]=e=>a.onEdit("name",e)),tooltip:"Имя модуля",value:l.current.name},null,8,["value"])])]),(0,o.createElementVNode)("div",Rt,[t[4]||(t[4]=(0,o.createElementVNode)("div",{class:"rowlabel"},"Ссылка",-1)),(0,o.createElementVNode)("div",Xt,[(0,o.createVNode)(i,{style:{width:"100%"},"onUpdate:value":t[1]||(t[1]=e=>a.onEdit("entry",e)),value:l.current.entry},null,8,["value"])])]),(0,o.createElementVNode)("div",Gt,[t[5]||(t[5]=(0,o.createElementVNode)("div",{class:"rowlabel"},"Точка входа",-1)),(0,o.createElementVNode)("div",Ht,[(0,o.createVNode)(i,{style:{width:"100%"},"onUpdate:value":t[2]||(t[2]=t=>e.$emit("edit","index",t)),tooltip:"Имя основного блока",value:l.current.index},null,8,["value"])])])])])}]]),Kt={class:"form-container"},Jt={class:"info"},Zt={class:"row"},Qt={class:"rowvalue"},el={class:"row"},tl={class:"rowvalue"},ll=["value"],ol=["value"],sl={key:1},nl={class:"row"},al={class:"rowvalue"},il={key:0},cl={name:"AssetEdit",props:{current:{type:Object,default:{name:"-"}},progress:{type:Number}},computed:{types(){return this.$app.assets.types}},methods:{end(){this.$emit("edit","name",this.$refs.nameeditor.endEdit()),this.$emit("edit","url",this.$refs.urleditor.endEdit())}}},rl=(0,c.A)(cl,[["render",function(e,t,l,s,n,a){const i=(0,o.resolveComponent)("LabelEdit");return(0,o.openBlock)(),(0,o.createElementBlock)("div",Kt,[(0,o.createElementVNode)("div",Jt,[(0,o.createElementVNode)("div",Zt,[t[3]||(t[3]=(0,o.createElementVNode)("div",{class:"rowlabel"},"NAME",-1)),(0,o.createElementVNode)("div",Qt,[(0,o.createVNode)(i,{style:{width:"100%"},ref:"nameeditor","onUpdate:value":t[0]||(t[0]=t=>e.$emit("edit","name",t)),value:l.current.name},null,8,["value"])])]),(0,o.createElementVNode)("div",el,[t[4]||(t[4]=(0,o.createElementVNode)("div",{class:"rowlabel"},"TYPE",-1)),(0,o.createElementVNode)("div",tl,[l.current.uid?((0,o.openBlock)(),(0,o.createElementBlock)("div",sl,(0,o.toDisplayString)(l.current.type),1)):((0,o.openBlock)(),(0,o.createElementBlock)("select",{key:0,class:"typeslist",value:l.current.type,onChange:t[1]||(t[1]=t=>e.$emit("edit","type",t.target.value))},[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(a.types,(e=>((0,o.openBlock)(),(0,o.createElementBlock)("option",{value:e},(0,o.toDisplayString)(e),9,ol)))),256))],40,ll))])]),(0,o.createElementVNode)("div",nl,[t[5]||(t[5]=(0,o.createElementVNode)("div",{class:"rowlabel"},"URL",-1)),(0,o.createElementVNode)("div",al,[(0,o.createVNode)(i,{style:{width:"100%"},ref:"urleditor","onUpdate:value":t[2]||(t[2]=t=>e.$emit("edit","url",t)),value:l.current.url},null,8,["value"])])])]),l.progress>0?((0,o.openBlock)(),(0,o.createElementBlock)("div",il,(0,o.toDisplayString)(l.progress),1)):(0,o.createCommentVNode)("v-if",!0)])}]]),dl={class:"importer"},pl={class:"row"},ml={class:"row"},ul={class:"label"},hl={class:"row"},vl={class:"label"},kl={class:"row"},yl={class:"label"};var El=l(2135);const gl={name:"Importer",data:()=>({merge:!1,assets:new Set,elements:new Set,slides:new Set}),methods:{onChangeElements(e){e.isSelected?this.elements.add(e.path):this.elements.delete(e.path),this.$emit("changelist",{assets:this.assets,elements:this.elements,slides:this.slides})},onChangeSlides(e){e.isSelected?this.slides.add(e.uid):this.slides.delete(e.uid),this.$emit("changelist",{assets:this.assets,elements:this.elements,slides:this.slides})},onChangeAssets(e){e.isgroup?e.isSelected?e.children.map((e=>this.assets.add(e.uid))):this.assets.clear():e.isSelected?this.assets.add(e.uid):this.assets.delete(e.uid),this.$emit("changelist",{assets:this.assets,elements:this.elements,slides:this.slides})}},props:{project:{type:Object}},components:{TreeView:El.A},computed:{assetsTree(){return this.project.assets.reduce(((e,t)=>{let l=e.find((e=>e.type===t.type));return l||(l={isgroup:!0,type:t.type,children:[],uid:t.type},e.push(l)),l.children.push(t),e}),[])}}},fl=(0,c.A)(gl,[["render",function(e,t,l,s,n,a){const i=(0,o.resolveComponent)("TreeView");return(0,o.openBlock)(),(0,o.createElementBlock)("div",dl,[(0,o.createElementVNode)("div",pl,[(0,o.createElementVNode)("div",null,[t[2]||(t[2]=(0,o.createTextVNode)("Импортировать в текущий проект ")),(0,o.withDirectives)((0,o.createElementVNode)("input",{type:"checkbox",onChange:t[0]||(t[0]=t=>e.$emit("options",{merge:n.merge})),"onUpdate:modelValue":t[1]||(t[1]=e=>n.merge=e)},null,544),[[o.vModelCheckbox,n.merge]])])]),(0,o.createElementVNode)("div",ml,[t[3]||(t[3]=(0,o.createElementVNode)("div",{class:"title"},"Ресурсы",-1)),(0,o.createElementVNode)("div",null,[(0,o.createVNode)(i,{childsFiled:"children",tree:a.assetsTree,onChangeSelect:a.onChangeAssets},{label:(0,o.withCtx)((({node:e})=>[(0,o.createElementVNode)("div",ul,(0,o.toDisplayString)(e.name||e.uid),1)])),_:1},8,["tree","onChangeSelect"])])]),(0,o.createElementVNode)("div",hl,[t[4]||(t[4]=(0,o.createElementVNode)("div",{class:"title"},"Элементы",-1)),(0,o.createElementVNode)("div",null,[(0,o.createVNode)(i,{childsFiled:"childrenz",tree:l.project.elements,onChangeSelect:a.onChangeElements},{label:(0,o.withCtx)((({node:e})=>[(0,o.createElementVNode)("div",vl,(0,o.toDisplayString)(e.name||e.uid),1)])),_:1},8,["tree","onChangeSelect"])])]),(0,o.createElementVNode)("div",kl,[t[5]||(t[5]=(0,o.createElementVNode)("div",{class:"title"},"Слайды",-1)),(0,o.createElementVNode)("div",null,[(0,o.createVNode)(i,{childsFiled:"childrenz",tree:l.project.slides,onChangeSelect:a.onChangeSlides},{label:(0,o.withCtx)((({node:e})=>[(0,o.createElementVNode)("div",yl,(0,o.toDisplayString)(e.name||e.uid),1)])),_:1},8,["tree","onChangeSelect"])])])])}]]),Vl={class:"form-container"},Bl={class:"form-column"},Nl={class:"row"},bl={class:"rowvalue"},Cl={key:0},wl=["value"],Sl={key:0,class:"row"},xl={class:"rowvalue"},Al=["value"],$l={key:1},Dl={class:"row"},Tl={class:"rowvalue"},Il={key:0},zl={name:"ActionEdit",data:()=>({selectedGroup:null}),props:{selected:{type:Object},progress:{type:Number}},computed:{types(){return this.$app.actions.library.filter((e=>e.type===this.selectedGroup))},groups(){return this.$app.actions.groups},selectedType(){return this.$app.actions.library.find((e=>e.component===this.selected.type))}},methods:{onUpdate(e,t){this.$emit("edit",e,t)},end(){this.$emit("edit","name",this.$refs.nameeditor.endEdit()),this.$emit("edit","url",this.$refs.urleditor.endEdit())}},mounted(){this.selectedGroup=this.groups[0],this.$emit("edit","group",this.selectedGroup),this.selected.type||(this.selected.type=this.types[0].component)}},_l=(0,c.A)(zl,[["render",function(e,t,l,s,n,a){const i=(0,o.resolveComponent)("LabelEdit");return(0,o.openBlock)(),(0,o.createElementBlock)("div",Vl,[(0,o.createElementVNode)("div",Bl,[(0,o.createElementVNode)("div",Nl,[t[3]||(t[3]=(0,o.createElementVNode)("div",{class:"rowlabel"},"Группа:",-1)),(0,o.createElementVNode)("div",bl,[l.selected.uid?((0,o.openBlock)(),(0,o.createElementBlock)("div",Cl,(0,o.toDisplayString)(l.selected.group),1)):(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createElementBlock)("select",{key:1,"onUpdate:modelValue":t[0]||(t[0]=e=>n.selectedGroup=e)},[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(a.groups,((e,t)=>((0,o.openBlock)(),(0,o.createElementBlock)("option",{key:t,value:e},(0,o.toDisplayString)(e),9,wl)))),128))],512)),[[o.vModelSelect,n.selectedGroup]])])]),n.selectedGroup?((0,o.openBlock)(),(0,o.createElementBlock)("div",Sl,[t[4]||(t[4]=(0,o.createElementVNode)("div",{class:"rowlabel"},"Тип:",-1)),(0,o.createElementVNode)("div",xl,[l.selected.uid?((0,o.openBlock)(),(0,o.createElementBlock)("div",$l,(0,o.toDisplayString)(a.selectedType.name),1)):(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createElementBlock)("select",{key:0,"onUpdate:modelValue":t[1]||(t[1]=e=>l.selected.type=e)},[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(a.types,((e,t)=>((0,o.openBlock)(),(0,o.createElementBlock)("option",{key:t,value:e.component},(0,o.toDisplayString)(e.name),9,Al)))),128))],512)),[[o.vModelSelect,l.selected.type]])])])):(0,o.createCommentVNode)("v-if",!0),(0,o.createElementVNode)("div",Dl,[t[5]||(t[5]=(0,o.createElementVNode)("div",{class:"rowlabel"},"Наименование:",-1)),(0,o.createElementVNode)("div",Tl,[(0,o.createVNode)(i,{style:{width:"100%"},ref:"nameeditor","onUpdate:value":t[2]||(t[2]=t=>e.$emit("edit","name",t)),value:l.selected.name},null,8,["value"])])]),l.selected.uid&&l.selected.type?((0,o.openBlock)(),(0,o.createBlock)((0,o.resolveDynamicComponent)(l.selected.type),(0,o.mergeProps)({key:1},l.selected,{onUpdate:a.onUpdate}),null,16,["onUpdate"])):(0,o.createCommentVNode)("v-if",!0)]),l.progress>0?((0,o.openBlock)(),(0,o.createElementBlock)("div",Il,(0,o.toDisplayString)(l.progress),1)):(0,o.createCommentVNode)("v-if",!0)])}],["__scopeId","data-v-060f3dc8"]])},3607:(e,t,l)=>{l.d(t,{A:()=>k});var o=l(2655);const s={class:"assetblock"},n={class:"assetcontent"},a={class:"assetrow"},i={class:"label"},c={style:{display:"block"}},r={class:"overleyicon"},d={name:"AssetView",props:{asset:{type:Object}},data:()=>({}),methods:{async showLib(){const e=await this.$app.assets.selectAsset(["gltf","texture"]);this.$emit("setasset",e)}}};var p=l(6262);const m=(0,p.A)(d,[["render",function(e,t,l,s,n,a){const i=(0,o.resolveDirective)("tooltip");return(0,o.openBlock)(),(0,o.createElementBlock)("div",c,[(0,o.createElementVNode)("div",r,[(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createElementBlock)("div",{onClick:t[0]||(t[0]=(...e)=>a.showLib&&a.showLib(...e)),class:"text"},[(0,o.createTextVNode)((0,o.toDisplayString)(l.asset.name||l.asset.uid),1)])),[[i,l.asset.url]])])])}],["__scopeId","data-v-951f7c20"]]),u={texture:"image",gltf:"cube",hdr:"cloud"},h={hdr:"assethdr"},v={name:"AssetView",props:{selected:{type:Object},label:{type:String},property:{type:Object}},mounted(){},data:()=>({view:!0}),methods:{onAssetChange(e){this.selected[this.property.prop]=e.uid,this.$app.engine.getManager("AssetsManager").UpdateAsset(this.selected,this.property.prop,(()=>{}))},getTypeIcon:e=>u[e]},computed:{val(){return this.selected[this.property.prop]},asset(){return this.val?this.$app.assets.list.find((e=>e.uid===this.val)):null},cmp(){return this.asset?h[this.asset.type]:null}},components:{assethdr:m}},k=(0,p.A)(v,[["render",function(e,t,l,c,r,d){return(0,o.openBlock)(),(0,o.createElementBlock)("div",s,[(0,o.createElementVNode)("div",n,[(0,o.createElementVNode)("div",a,[(0,o.createElementVNode)("div",i,(0,o.toDisplayString)(l.label),1),((0,o.openBlock)(),(0,o.createBlock)((0,o.resolveDynamicComponent)(d.cmp),{onSetasset:d.onAssetChange,asset:d.asset},null,40,["onSetasset","asset"]))])])])}],["__scopeId","data-v-505fda3f"]])},3892:(e,t,l)=>{l.d(t,{A:()=>V});var o=l(2655);const s={class:"hierarhy-view"},n={class:"treeicon"};var a=l(2135);const i={class:"container"},c={class:"block"},r={class:"content"},d={class:"sub-content"},p={class:"subtitle"},m={class:"subtitle"},u=["value"],h={props:{callback:{type:Function},value:{type:Object,default:()=>({name:"",type:"model",parent:null})}},methods:{checkType(){return this.value.parent||"block"===this.value.type?this.value.parent&&"block"===this.value.type?(this.$app.toasts.add({message:"Тип block можно добавить только в корневой список. Не выбирайте элемент при добавлении."}),void this.$emit("update:value",{...this.value,type:"model"})):void 0:(this.$app.toasts.add({message:"В корневой список можно добавить только block тип"}),void this.$emit("update:value",{...this.value,type:"block"}))}},computed:{el:{get(){return this.value||{name:"",type:""}},set(e){this.$emit("update:value",e)}},types(){return this.$app.elements.types}}};var v=l(6262);const k=(0,v.A)(h,[["render",function(e,t,l,s,n,a){return(0,o.openBlock)(),(0,o.createElementBlock)("div",i,[(0,o.createElementVNode)("div",c,[(0,o.createElementVNode)("div",r,[(0,o.createElementVNode)("div",d,[(0,o.createElementVNode)("div",p,[(0,o.withDirectives)((0,o.createElementVNode)("input",{type:"text",placeholder:"Name","onUpdate:modelValue":t[0]||(t[0]=e=>a.el.name=e)},null,512),[[o.vModelText,a.el.name]])]),(0,o.createElementVNode)("div",m,[(0,o.withDirectives)((0,o.createElementVNode)("select",{onChange:t[1]||(t[1]=(...e)=>a.checkType&&a.checkType(...e)),class:"typeslist","onUpdate:modelValue":t[2]||(t[2]=e=>a.el.type=e)},[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(a.types,(e=>((0,o.openBlock)(),(0,o.createElementBlock)("option",{value:e},(0,o.toDisplayString)(e),9,u)))),256))],544),[[o.vModelSelect,a.el.type]])])])])])])}],["__scopeId","data-v-37404c2f"]]),y={class:"container"},E={props:{values:{type:Object,require:!0}}},g=(0,v.A)(E,[["render",function(e,t,l,s,n,a){return(0,o.openBlock)(),(0,o.createElementBlock)("div",y,[(0,o.createElementVNode)("div",null,(0,o.toDisplayString)(l.values.text),1)])}],["__scopeId","data-v-2cc2e0b7"]]),f={name:"TreeElement",props:{title:""},mounted(){},data:()=>({filtersView:!1,filterRect:{},requestRemove:!1,removeData:{text:""},newElementData:{},addElementView:!1}),computed:{selected(){return this.$app.selection.selected},selection(){return this.$app.selection},tree(){return this.$app.elements.list}},methods:{isInSlide:e=>e.state?.isState,insertToSlide(e){e.state?this.$app.toasts.add({message:"Блок уже добавлен в выбраный слайд"}):this.$app.slides.createState(e.paths)},deleteElement(e){this.removeData.text=`Удалить ${e.name} (${e.uid}) ?`,this.$app.modal.open({header:{value:"Удалить элемент",handler:()=>{this.$app.modal.close(),this.requestRemove=!1}},content:{},footer:{buttons:[{label:"Удалить",class:"secondary",handler:async()=>{this.$app.modal.close(),this.requestRemove=!1,this.$app.elements.remove(e),this.$app.toasts.add({message:`Элемент ${e.name} удален`})}},{label:"Отмена",class:"primary",handler:async()=>{this.$app.modal.close(),this.requestRemove=!1}}]}}),this.requestRemove=!0},onUpdateExpanded(e){},onNodeClick(e){this.$app.selection.select(e)},onChangeSelection(){},addElement(){let e;this.newElementData.name="Новый элемент",this.newElementData.uid=`Element${Date.now()}`,this.selected?.isElement?(this.newElementData.type=this.selected?"model":"block",e=this.selected,this.newElementData.paths=[...this.selected.paths]):(this.newElementData.type="block",this.newElementData.paths=[],this.newElementData.children=[]),this.newElementData.paths.push(this.newElementData.uid),this.newElementData.path=this.newElementData.paths.join("."),this.newElementData.visible=!0,this.$app.modal.open({header:{value:`Добавить элемент ${this.selected?.isElement?"в "+this.selected.name||0:" в сцену"}`,handler:()=>{this.$app.modal.close(),this.addElementView=!1}},content:{},footer:{buttons:[{label:"Добавить",class:"secondary",handler:async()=>{this.$app.elements.create(this.newElementData,e),this.$app.modal.close(),this.addElementView=!1}},{label:"Отмена",class:"primary",handler:async()=>{this.$app.modal.close(),this.addElementView=!1}}]}}),this.addElementView=!0}},components:{TreeView:a.A,ConfirmModal:g,ElementAdd:k}},V=(0,v.A)(f,[["render",function(e,t,l,a,i,c){const r=(0,o.resolveComponent)("icon"),d=(0,o.resolveComponent)("TreeView"),p=(0,o.resolveComponent)("ConfirmModal"),m=(0,o.resolveComponent)("ElementAdd"),u=(0,o.resolveDirective)("tooltip");return(0,o.openBlock)(),(0,o.createElementBlock)("div",s,[(0,o.createElementVNode)("div",null,[(0,o.createTextVNode)((0,o.toDisplayString)(l.title)+": ",1),(0,o.createElementVNode)("button",{onClick:t[0]||(t[0]=(...e)=>c.addElement&&c.addElement(...e))},[(0,o.createVNode)(r,{value:"plus",size:"0.75em"})])]),(0,o.createVNode)(d,{tree:c.tree,onClickNode:c.onNodeClick,onChangeSelect:c.onChangeSelection,childsFiled:"children",onUpdateExpanded:c.onUpdateExpanded},{append:(0,o.withCtx)((({node:e,index:t})=>[(0,o.createElementVNode)("div",n,[(0,o.createCommentVNode)(' <icon value="target" v-tooltip="\'Фокус\'" size="1em" @click="$emit(\'target\', node)"></icon>'),(0,o.createCommentVNode)(" <icon v-tooltip=\"'Видимость'\" :value=\"node.show ? 'eye' : 'eye-blocked'\" size=\"1em\"\n            @click=\"node.visible = !node.visible\" :color=\"node.visible ? '#8ec58e' : '#8ec58e80'\">\n          </icon> "),e.isBlock?(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createBlock)(r,{key:0,value:"dice",size:"1em",onClick:t=>c.insertToSlide(e),color:c.isInSlide(e)?"#8ec58e":"#8ec58e80"},null,8,["onClick","color"])),[[u,"Добавить в слайд"]]):(0,o.createCommentVNode)("v-if",!0),(0,o.withDirectives)((0,o.createVNode)(r,{onClick:t=>c.deleteElement(e),value:"bin",size:"1em"},null,8,["onClick"]),[[u,"Удалить"]]),(0,o.createCommentVNode)(' <icon v-if="index === 0" size="100%" value="bin"></icon> ')])])),label:(0,o.withCtx)((({node:e})=>[(0,o.createElementVNode)("div",{class:(0,o.normalizeClass)([{focusedtree:c.selected===e},"label"])},(0,o.toDisplayString)(e.name||e.uid),3)])),_:1},8,["tree","onClickNode","onChangeSelect","onUpdateExpanded"]),i.requestRemove?((0,o.openBlock)(),(0,o.createBlock)(o.Teleport,{key:0,to:".modal-content"},[(0,o.createVNode)(p,{values:i.removeData},null,8,["values"])])):(0,o.createCommentVNode)("v-if",!0),i.addElementView?((0,o.openBlock)(),(0,o.createBlock)(o.Teleport,{key:1,to:".modal-content"},[(0,o.createVNode)(m,{value:i.newElementData,"onUpdate:value":t[1]||(t[1]=e=>i.newElementData=e)},null,8,["value"])])):(0,o.createCommentVNode)("v-if",!0)])}],["__scopeId","data-v-6d4a451e"]])},3946:(e,t,l)=>{l.d(t,{A:()=>E});var o=l(2655);const s={class:"container"},n={class:"info"},a={class:"row"},i={class:"rowvalue"},c={class:"row"},r={class:"rowvalue"},d=["value"],p={class:"rowline"},m=["value"],u=["value"],h=["value"],v=["value"],k=["value"],y={name:"Assets",data:()=>({current:null}),props:{callback:{type:Function},property:{type:Object}},computed:{list(){return this.$app.project.assets},types:()=>["float","bool","color","string","asset","vector2","vector3","vector4","quaternion"]},methods:{checkType:e=>typeof e,selectAsset(e){this.current=e,this.callback(this.current)}}},E=(0,l(6262).A)(y,[["render",function(e,t,l,y,E,g){const f=(0,o.resolveComponent)("LabelEdit");return(0,o.openBlock)(),(0,o.createElementBlock)("div",s,[(0,o.createElementVNode)("div",n,[(0,o.createElementVNode)("div",a,[t[7]||(t[7]=(0,o.createElementVNode)("div",{class:"rowlabel"},"Свойство",-1)),(0,o.createElementVNode)("div",i,[(0,o.createVNode)(f,{style:{width:"100%"},"onUpdate:value":t[0]||(t[0]=e=>l.property.name=e),value:l.property.name},null,8,["value"])])]),(0,o.createElementVNode)("div",c,[t[8]||(t[8]=(0,o.createElementVNode)("div",{class:"rowlabel"},"Тип",-1)),(0,o.createElementVNode)("div",r,[(0,o.withDirectives)((0,o.createElementVNode)("select",{class:"typeslist","onUpdate:modelValue":t[1]||(t[1]=e=>l.property.type=e)},[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(g.types,(e=>((0,o.openBlock)(),(0,o.createElementBlock)("option",{value:e},(0,o.toDisplayString)(e),9,d)))),256))],512),[[o.vModelSelect,l.property.type]])])]),(0,o.createElementVNode)("div",p,["bool"===l.property.type?((0,o.openBlock)(),(0,o.createElementBlock)("input",{key:0,type:"checkbox",value:l.property.value,"onUpdate:value":t[2]||(t[2]=e=>l.property.value=e)},null,40,m)):(0,o.createCommentVNode)("v-if",!0),"number"===l.property.type?((0,o.openBlock)(),(0,o.createElementBlock)("input",{key:1,type:"number",value:l.property.value,"onUpdate:value":t[3]||(t[3]=e=>l.property.value=e)},null,40,u)):(0,o.createCommentVNode)("v-if",!0),"string"===l.property.type?((0,o.openBlock)(),(0,o.createElementBlock)("input",{key:2,type:"text",value:l.property.value,"onUpdate:value":t[4]||(t[4]=e=>l.property.value=e)},null,40,h)):(0,o.createCommentVNode)("v-if",!0),"color"===l.property.type?((0,o.openBlock)(),(0,o.createElementBlock)("input",{key:3,type:"color",value:l.property.value,"onUpdate:value":t[5]||(t[5]=e=>l.property.value=e)},null,40,v)):(0,o.createCommentVNode)("v-if",!0),"image"===l.property.type?((0,o.openBlock)(),(0,o.createElementBlock)("input",{key:4,type:"image",value:l.property.value,"onUpdate:value":t[6]||(t[6]=e=>l.property.value=e)},null,40,k)):(0,o.createCommentVNode)("v-if",!0)])])])}],["__scopeId","data-v-f1f0f914"]])},5982:(e,t,l)=>{l.d(t,{A:()=>c});var o=l(2655);const s={style:{display:"grid","grid-template-columns":"96px 1fr"}},n=["value"],a={key:1},i={name:"ModelTypes",data:()=>({types:["model","camera","chart3d"]}),props:{selected:{type:Object}}},c=(0,l(6262).A)(i,[["render",function(e,t,l,i,c,r){return(0,o.openBlock)(),(0,o.createElementBlock)("div",s,[t[1]||(t[1]=(0,o.createElementVNode)("div",null,"Тип:",-1)),c.types.includes(l.selected.type)?(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createElementBlock)("select",{key:0,class:"typeslist","onUpdate:modelValue":t[0]||(t[0]=e=>l.selected.type=e)},[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(c.types,(e=>((0,o.openBlock)(),(0,o.createElementBlock)("option",{value:e},(0,o.toDisplayString)(e),9,n)))),256))],512)),[[o.vModelSelect,l.selected.type]]):((0,o.openBlock)(),(0,o.createElementBlock)("div",a,(0,o.toDisplayString)(l.selected.type),1))])}]])},7611:(e,t,l)=>{l.d(t,{A:()=>C});var o=l(2655);const s={class:"blocks-container"},n={class:"blockslabel"},a={key:1,class:"blocks"},i={class:"blocklabel"},c={class:"blocktitle"},r={style:{display:"flex","justify-content":"center",gap:"5px"}},d=["onClick"],p=["onClick"],m=["onClick"],u={class:"actionview"},h={class:"actionrow"},v={class:"actionform"},k={key:0,class:"actionline"},y={props:{value:{type:Object,default:{uid:"",hook:""}},isState:{type:Boolean,default:!1},target:{type:Object}},data:()=>({expanded:!1,played:!1}),computed:{action(){return this.$app.actions.list.find((e=>e.uid===this.value.uid))}},methods:{onUpdate(e,t){const l=e.split(".");let o=this.action;for(let e=0;e<l.length-1;e++){const t=l[e];o[t]||(o[t]={}),o=o[t]}o[l[l.length-1]]=t,this.$emit("edit",e,t)},remove(){this.target.isState?(this.target.removeAction(this.value.uid,this.value.hook),this.$app.slides.saveState(this.target)):this.$app.elements.save(this.target)},play(){this.$app.engine.getManager("ActionsManager").GetAction(this.action.type)(this.action,this.target,!1)},reset(){}}};var E=l(6262);const g=(0,E.A)(y,[["render",function(e,t,l,s,n,a){const i=(0,o.resolveComponent)("icon");return(0,o.openBlock)(),(0,o.createElementBlock)("div",u,[(0,o.createElementVNode)("div",h,[(0,o.createElementVNode)("div",{class:"label",onClick:t[0]||(t[0]=e=>n.expanded=!n.expanded)},[(0,o.createTextVNode)((0,o.toDisplayString)(n.expanded?"▼":"▶")+" ",1),(0,o.createElementVNode)("span",null,(0,o.toDisplayString)(l.isState?"(S)":"(M)"),1),(0,o.createTextVNode)(" ("+(0,o.toDisplayString)(a.action.type)+") "+(0,o.toDisplayString)(a.action.name||a.action.uid),1)])]),(0,o.withDirectives)((0,o.createElementVNode)("div",v,[((0,o.openBlock)(),(0,o.createBlock)((0,o.resolveDynamicComponent)(a.action.type),(0,o.mergeProps)(a.action,{onUpdate:a.onUpdate,options:{inspector:!0,expanded:n.expanded}}),{default:(0,o.withCtx)((()=>[(0,o.createElementVNode)("button",{class:"square",onClick:t[1]||(t[1]=(...e)=>a.play&&a.play(...e))},[(0,o.createVNode)(i,{value:n.played?"stop2":"play3",size:"1.2em"},null,8,["value"])]),(0,o.createElementVNode)("button",{onClick:t[2]||(t[2]=(...e)=>a.reset&&a.reset(...e))},[(0,o.createVNode)(i,{value:"undo",size:"1em"})]),(0,o.createElementVNode)("button",{onClick:t[3]||(t[3]=(...e)=>a.remove&&a.remove(...e))},[(0,o.createVNode)(i,{value:"bin",size:"1em"})])])),_:1},16,["onUpdate","options"]))],512),[[o.vShow,n.expanded]]),n.expanded?(0,o.createCommentVNode)("v-if",!0):((0,o.openBlock)(),(0,o.createElementBlock)("div",k,[(0,o.createElementVNode)("button",{class:"square",onClick:t[4]||(t[4]=(...e)=>a.play&&a.play(...e))},[(0,o.createVNode)(i,{value:n.played?"stop2":"play3",size:"1em"},null,8,["value"])]),(0,o.createElementVNode)("button",{class:"square",onClick:t[5]||(t[5]=(...e)=>a.reset&&a.reset(...e))},[(0,o.createVNode)(i,{value:"undo",size:"1em"})]),(0,o.createElementVNode)("button",{class:"square",onClick:t[6]||(t[6]=(...e)=>a.remove&&a.remove(...e))},[(0,o.createVNode)(i,{value:"bin",size:"1em"})])]))])}]]),f=["onMouseover","onClick"],V={props:["items","menuX","menuY"],data:()=>({isActive:!1,highlightedIndex:null}),methods:{highlight(e){this.highlightedIndex=e},deactivate(){this.highlightedIndex=null,this.$emit("select",null)},selectItem(e){this.$emit("select",e)}}},B=(0,E.A)(V,[["render",function(e,t,l,s,n,a){return(0,o.openBlock)(),(0,o.createElementBlock)("div",{class:"menu",onMouseleave:t[0]||(t[0]=(...e)=>a.deactivate&&a.deactivate(...e)),style:(0,o.normalizeStyle)({top:l.menuY-3+"px",left:l.menuX+"px"})},[(0,o.createElementVNode)("ul",null,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(l.items,((e,t)=>((0,o.openBlock)(),(0,o.createElementBlock)("li",{key:t,onMouseover:e=>a.highlight(t),onClick:t=>a.selectItem(e),class:(0,o.normalizeClass)({highlighted:n.highlightedIndex===t})},(0,o.toDisplayString)(e),43,f)))),128))])],36)}],["__scopeId","data-v-f62b4f74"]]),N={name:"EventsList",props:{selected:{type:Object},property:{type:Object}},watch:{"selected.data":{handler(e){console.log(e)},deep:!0}},computed:{eventTypes(){return this.$app.events.types},actions(){return this.$app.actions},hooks(){return this.$app.actions.hooks.filter((e=>!this.getActionsHooks().includes(e)))},modelActions(){return this.selected.model.actions.filter((e=>e.hook===eventType))}},mounted(){},methods:{getStateActions(e){return this.selected.stateActions.filter((t=>t.hook===e))},getActionsHooks(){return this.selected.actions?[...new Set(this.selected.actions.map((e=>e.hook)))]:[]},onSelectEvent(e){this.listshow=!1,this.$app.actions.showLib((t=>{t&&(this.selected.isState?(this.selected.addAction({uid:t.uid,hook:e}),this.$app.slides.saveState(this.selected)):this.$app.elements.save(this.selected))}))},openActionsList(e){this.$app.actions.showLib((t=>{t&&(this.selected.isState?(this.selected.addAction({uid:t.uid,hook:e}),this.$app.slides.saveState(this.selected)):this.$app.elements.save(this.selected))}))},addEvent(e){this.selected.actions||(this.selected.actions=[]),this.events.length=0,this.events.push(...["create.on","enable.on","disable.on","mouse.over","mouse.out"].filter((e=>!this.getActionsHooks().includes(e)))),this.menuX=e.clientX,this.menuY=e.clientY,this.listshow=!0},async reset(e){const t=this.selected.stateActions.filter((t=>t.hook===e));for(let e=0;e<t.length;e++){const l=t[e],o=(this.$app.actions.list.find((e=>e.uid===l.uid)),this.selected.position||this.selected.model.position);this.selected.model?this.selected.model.position.copy(o):this.selected.position.copy(o)}},async play(e){this.played=!0;const t=[],l=this.selected.stateActions.filter((t=>t.hook===e));for(let e=0;e<l.length;e++){const o=l[e],s=this.$app.actions.list.find((e=>e.uid===o.uid)),n=this.$app.engine.getManager("ActionsManager").GetAction(s.type);t.push(n(s,this.selected,!1))}await Promise.all(t),this.played=!1},onEdit(e){this.$app.actions.save(e)}},data:()=>({actLibShow:!1,actListShow:!1,actsButtons:[],regActType:null,selectedActionType:null,regbusy:!1,selectdAction:null,eventType:"",listshow:!1,show:!0,events:[],menuX:0,menuY:0,played:!1}),components:{Action:g,HooksList:B}},b=(0,E.A)(N,[["render",function(e,t,l,u,h,v){const k=(0,o.resolveComponent)("icon"),y=(0,o.resolveComponent)("HooksList"),E=(0,o.resolveComponent)("Action");return(0,o.openBlock)(),(0,o.createElementBlock)("div",s,[(0,o.createElementVNode)("div",n,[(0,o.createElementVNode)("div",{onClick:t[0]||(t[0]=e=>h.show=!h.show)},"События : "),(0,o.createElementVNode)("button",{onClick:t[1]||(t[1]=(...e)=>v.addEvent&&v.addEvent(...e))},[(0,o.createVNode)(k,{value:"plus",size:"0.9em"})])]),h.listshow?((0,o.openBlock)(),(0,o.createBlock)(o.Teleport,{key:0,to:"body"},[(0,o.createVNode)(y,{menuX:h.menuX,menuY:h.menuY,items:v.hooks,onSelect:v.onSelectEvent},null,8,["menuX","menuY","items","onSelect"])])):(0,o.createCommentVNode)("v-if",!0),h.show?((0,o.openBlock)(),(0,o.createElementBlock)("div",a,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(v.getActionsHooks(),((e,t)=>((0,o.openBlock)(),(0,o.createElementBlock)("div",{key:t,class:"block"},[(0,o.createElementVNode)("div",i,[(0,o.createElementVNode)("div",c,(0,o.toDisplayString)(e),1),(0,o.createElementVNode)("div",r,[(0,o.createElementVNode)("button",{class:"square",onClick:t=>v.play(e)},[(0,o.createVNode)(k,{value:h.played?"stop2":"play3",size:"1em"},null,8,["value"])],8,d),(0,o.createElementVNode)("button",{class:"square",onClick:t=>v.reset(e)},[(0,o.createVNode)(k,{value:"undo",size:"1em"})],8,p)]),(0,o.createElementVNode)("button",{onClick:t=>v.openActionsList(e)},[(0,o.createVNode)(k,{value:"plus",size:"0.9em"})],8,m)]),((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(l.selected.model.actions.filter((t=>t.hook===e)),((e,t)=>((0,o.openBlock)(),(0,o.createBlock)(E,{value:e,target:l.selected,ref_for:!0,ref:`action${e.uid}`,key:t,onEdit:t=>v.onEdit(e)},null,8,["value","target","onEdit"])))),128)),l.selected.isState?((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,{key:0},(0,o.renderList)(v.getStateActions(e),((e,t)=>((0,o.openBlock)(),(0,o.createBlock)(E,{isState:!0,value:e,ref_for:!0,ref:`action${e.uid}`,key:t,target:l.selected,onEdit:t=>v.onEdit(e)},null,8,["value","target","onEdit"])))),128)):(0,o.createCommentVNode)("v-if",!0)])))),128))])):(0,o.createCommentVNode)("v-if",!0)])}]]),C=b},7897:(e,t,l)=>{l.d(t,{A:()=>c});var o=l(2655);const s={class:"hierarhy-view"},n={class:"treeicon"};var a=l(2135);const i={name:"Hierarhy",props:{title:""},data:()=>({filtersView:!1,filterRect:{}}),computed:{selected(){return this.$app.selection.selected},slide(){return this.$app.slides.actived||{children:[]}}},methods:{removeState(e){this.$app.slides.removeState(e.path,this.$app.slides.actived.uid)},onNodeClick(e){this.$app.selection.select(e)},onChangeSelection(){},onUpdateExpanded(){},assState(){"block"===this.$app.selection.element?.type||this.$app.toasts.add({message:"Только типы block можно добавлять в состояния"})}},components:{TreeView:a.A}},c=(0,l(6262).A)(i,[["render",function(e,t,l,a,i,c){const r=(0,o.resolveComponent)("icon"),d=(0,o.resolveComponent)("TreeView"),p=(0,o.resolveDirective)("tooltip");return(0,o.openBlock)(),(0,o.createElementBlock)("div",s,[(0,o.createElementVNode)("div",null,(0,o.toDisplayString)(l.title)+":"+(0,o.toDisplayString)(c.slide.name),1),(0,o.createVNode)(d,{tree:c.slide.children,onClickNode:c.onNodeClick,onChangeSelect:c.onChangeSelection,onUpdateExpanded:c.onUpdateExpanded},{checkbox:(0,o.withCtx)((()=>t[0]||(t[0]=[(0,o.createElementVNode)("span",null,[(0,o.createElementVNode)("input",{type:"checkbox"})],-1)]))),append:(0,o.withCtx)((({node:e,index:t})=>[(0,o.createCommentVNode)(' <div class="filters" v-if="index === 0">\n                    <button v-tooltip="\'Change filters\'"  @click="viewFilters" class="filterbutton">\n                        <icon v-for="v in target.filters" :value="v.props.value" :color="v.props.color" size="1em"></icon>\n                    </button>\n                    <PopupList v-if="filtersView" :rect="filterRect" :values="target.filters" @callback="filtersView = false"></PopupList>\n                </div> '),(0,o.createElementVNode)("div",n,[(0,o.createCommentVNode)(' <icon value="target" v-tooltip="\'Fit\'" size="1em" @click="$emit(\'target\', node)"></icon>\n          <icon v-tooltip="\'Visible\'" :value="node.isVisible ? \'eye\' : \'eye-blocked\'" size="1em"\n            @click="$emit(\'visible\', node)">\n          </icon> '),(0,o.withDirectives)((0,o.createVNode)(r,{onClick:t=>c.removeState(e),value:"bin",size:"1em"},null,8,["onClick"]),[[p,"Удалить элемент из слайда"]])])])),label:(0,o.withCtx)((({node:e})=>[(0,o.createElementVNode)("div",{class:(0,o.normalizeClass)([{focusedtree:c.selected===e},"label"])},(0,o.toDisplayString)(e.name||e.model.name||e.uid),3)])),_:1},8,["tree","onClickNode","onChangeSelect","onUpdateExpanded"])])}],["__scopeId","data-v-15bd43d8"]])},8092:(e,t,l)=>{l.d(t,{A:()=>i});var o=l(2655);const s={class:"alert"},n={class:"text"},a={name:"Label",props:{icon:{type:String,default:"notification"},message:{type:String,default:""},type:{type:String,default:"info"}}},i=(0,l(6262).A)(a,[["render",function(e,t,l,a,i,c){const r=(0,o.resolveComponent)("icon");return(0,o.openBlock)(),(0,o.createElementBlock)("div",null,[(0,o.createElementVNode)("div",s,[(0,o.createVNode)(r,{class:(0,o.normalizeClass)(`${l.type}icon`),size:"3em",value:l.icon},null,8,["class","value"]),(0,o.createElementVNode)("span",n,(0,o.toDisplayString)(l.message),1)])])}]])},8475:(e,t,l)=>{l.d(t,{A:()=>i});var o=l(2655);const s={style:{display:"grid","grid-template-columns":"96px 1fr"}},n={style:{"text-align":"center"}},a={props:{selected:{type:Object},values:{type:Object,default:{property:"intensity ",step:.01}},label:{type:String}},watch:{selected(){this.val=this.$app.project.readElementProp(this.selected.uid,this.values.property)}},data:()=>({val:0}),mounted(){this.val=this.$app.project.readElementProp(this.selected.uid,this.values.property)},methods:{updateValue(e){this.selected.properties||(this.selected.properties={}),this.selected.properties[this.values.property]||(this.selected.properties[this.values.property]=1),this.selected.properties[this.values.property]=e,this.$app.project.updateElementProps(this.selected.uid,{[this.values.property]:e}),this.val=this.$app.project.readElementProp(this.selected.uid,this.values.property)}}},i=(0,l(6262).A)(a,[["render",function(e,t,l,a,i,c){const r=(0,o.resolveComponent)("FloatInput");return(0,o.openBlock)(),(0,o.createElementBlock)("div",s,[(0,o.createElementVNode)("div",null,(0,o.toDisplayString)(l.label),1),(0,o.createElementVNode)("div",n,[(0,o.createVNode)(r,{min:l.values.min||0,step:l.values.step||.01,value:i.val,onChanged:c.updateValue},null,8,["min","step","value","onChanged"])])])}]])},8809:(e,t,l)=>{l.d(t,{A:()=>i});var o=l(2655),s=l(8092);let n=0;const a=(0,o.reactive)({list:[],add({message:e,icon:t,onclick:l,timehide:i=!0,type:c,...r},d=(0,o.markRaw)(s.A)){const p=(0,o.reactive)({id:n++,data:{message:e,icon:t,type:c,...r},component:d});return i&&(p.timeout=setTimeout((()=>{a.remove(p.id)}),3e3)),p.onclick=l||a.remove.bind(this,p.id),a.list.push(p),p},remove(e){for(let t=a.list.length-1;t>=0;t--)a.list[t].id===e&&a.list.splice(t,1)}}),i=a},9317:(e,t,l)=>{l.d(t,{A:()=>r});var o=l(2655);const s={class:"hierarhy-view"},n={class:"title"},a={class:"treeicon"};var i=l(2135);const c={name:"TreeAssets",props:{title:""},data:()=>({filtersView:!1,filterRect:{},focused:[],editform:!1,editedAsset:{},newAsset:!1,viewlib:!1,libButtons:{add:!0,save:!1}}),computed:{tree(){return this.$app.assets.assetsTree},assets(){return this.$app.assets},selected(){return this.$app.selection.selected}},methods:{onAddClick(){this.$refs.assetsLib.addNew(),this.libButtons.save=!0,this.libButtons.add=!1},onAssetChange(e){},onSaveClick(){this.assets.updateAsset(this.current)},openLib(){(0,o.reactive)({save:!1}),this.$app.modal.open({header:{value:"Ресурсы",handler:()=>{this.$app.modal.close(),this.viewlib=!1}},content:{},footer:{buttons:[]}}),this.viewlib=!0},onEdit(e,t){this.editedAsset[e]=t},editAsset(e){this.editedAsset=e?{...e,progress:0}:{uid:null,type:"gltf",name:"Новый ресурс",url:"https://",parameters:{},progress:0},this.$app.assets.editAsset(this.editedAsset)},onUpdateExpanded(e){},onNodeClick(e){this.$app.selection.select(e.isgroup?null:e)},onChangeSelection(){},remove(e){this.assets.removeAsset(e)}},components:{TreeView:i.A}},r=(0,l(6262).A)(c,[["render",function(e,t,l,i,c,r){const d=(0,o.resolveComponent)("icon"),p=(0,o.resolveComponent)("TreeView"),m=(0,o.resolveDirective)("tooltip");return(0,o.openBlock)(),(0,o.createElementBlock)("div",s,[(0,o.createElementVNode)("div",n,[(0,o.createTextVNode)((0,o.toDisplayString)(l.title)+": ",1),(0,o.createElementVNode)("button",{class:"square",onClick:t[0]||(t[0]=e=>r.editAsset())},[(0,o.createVNode)(d,{value:"plus",size:"0.9em"})]),(0,o.createCommentVNode)(' <button class="square" @click="openLib()">\n        <icon value="books" size="0.9em"></icon>\n      </button> ')]),(0,o.createVNode)(p,{childsFiled:"children",tree:r.tree,onClickNode:r.onNodeClick,onChangeSelect:r.onChangeSelection,onUpdateExpanded:r.onUpdateExpanded},{append:(0,o.withCtx)((({node:e,index:t})=>[(0,o.createElementVNode)("div",a,[(0,o.createCommentVNode)(' <icon v-if="!node.isgroup" value="target" v-tooltip="\'Find\'" size="1em" @click="$emit(\'target\', node)"></icon> '),(0,o.createCommentVNode)(' <icon v-if="!node.isgroup" value="pencil" v-tooltip="\'Редактировать\'" size="1em" @click="editAsset(node)">\n          </icon> '),e.isgroup?(0,o.createCommentVNode)("v-if",!0):(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createBlock)(d,{key:0,value:"bin",size:"1em",onClick:t=>r.remove(e)},null,8,["onClick"])),[[m,"Удалить"]])])])),label:(0,o.withCtx)((({node:l})=>[(0,o.createCommentVNode)(' <div @click="onSelectedNode" :class="{ \'focusedtree\': selected === node }"  class="label"\n          v-tooltip="`${node.url || node.type}`"> {{ node.name || node.uid }}</div> '),(0,o.createElementVNode)("div",{onClick:t[1]||(t[1]=(...t)=>e.onSelectedNode&&e.onSelectedNode(...t)),class:(0,o.normalizeClass)([{focusedtree:r.selected===l},"label"])},(0,o.toDisplayString)(l.name||l.uid),3)])),_:1},8,["tree","onClickNode","onChangeSelect","onUpdateExpanded"])])}],["__scopeId","data-v-cfd9d79a"]])},9391:(e,t,l)=>{l.d(t,{A:()=>a});var o=l(2655),s=l(5216);const n=(0,o.reactive)({uid:"",selected:null,slide:{},select(e){if(console.log(e),n.selected=e,!n.selected)return s.A.Select(null),void(n.uid=null);n.uid=n.selected.uid,e.model?.isElement?s.A.Select(n.selected.model):s.A.Select(null)}}),a=n},9548:(e,t,l)=>{l.d(t,{A:()=>i});var o=l(2655);const s={class:"scenetools"},n={key:0,class:"sceneassets"},a={data:()=>({asset:{uid:"hdrscene"},view:!0}),name:"SceneTools"},i=(0,l(6262).A)(a,[["render",function(e,t,l,a,i,c){return(0,o.openBlock)(),(0,o.createElementBlock)("div",s,[(0,o.createElementVNode)("div",{onClick:t[0]||(t[0]=e=>i.view=!i.view)},"Параметры сцены:"),i.view?((0,o.openBlock)(),(0,o.createElementBlock)("div",n,[(0,o.createCommentVNode)(' <AssetView label="Окружение" :asset="asset"> </AssetView> ')])):(0,o.createCommentVNode)("v-if",!0)])}]])},9608:(e,t,l)=>{l.d(t,{A:()=>u});var o=l(2655);const s={class:"transform-container"},n={class:"label"},a={key:0,class:"transforms"},i={key:1},c={key:3},r={key:5};var d=l(125),p=l(5216);const m={data:()=>({expanded:!0}),props:{selected:{type:Object,default:null}},computed:{model(){return this.selected.model},values(){return this.selected.data},state(){return this.selected.state}},watch:{selected:{handler(e,t){t&&this.restoreModelTransform(t),this.applyModelTransform(e)}}},beforeUnmount(){this.selected&&(this.restoreModelTransform(this.selected),p.A.Transformer.removeEventListener("objectChange",this.onTransformerEvent))},mounted(){p.A.Transformer.addEventListener("objectChange",this.onTransformerEvent),this.applyModelTransform(this.selected)},methods:{restoreModelTransform(e){e.state&&e.isState&&e.state.activate()},applyModelTransform(e){e.data.position&&e.model.position.copy(e.data.position),e.data.rotation&&e.model.rotation.setFromVector3(e.data.rotation,"XYZ"),e.data.scale&&e.model.scale.copy(e.data.scale)},assignFromModel(e){this.selected.data[e]=this.selected.model[e].clone(),this.selected[e]=this.selected.data[e].clone()},onTransformerEvent(e){const t=p.A.Transformer.object;switch(p.A.Transformer.mode){case"translate":this.selected.data.position||this.assignFromModel("position"),this.selected.position||(this.selected.position=t.model.position.clone()),this.selected.position.copy(t.model.position),this.selected.data.position=this.selected.position.clone();break;case"rotate":this.selected.data.rotation||this.assignFromModel("rotation"),this.selected.rotation||(this.selected.rotation=t.model.rotation.clone()),this.selected.rotation.copy(t.model.rotation),this.selected.data.rotation={x:this.selected.rotation.x,y:this.selected.rotation.y,z:this.selected.rotation.z};break;case"scale":this.selected.scale||this.assignFromModel("scale"),this.selected.scale||(this.selected.scale=t.model.scale.clone()),this.selected.scale.copy(t.model.scale),this.selected.data.scale=this.selected.scale.clone()}this.$emit("modify")},async onChangeTransform(e,t){switch(e){case"position":this.selected.data.position||this.assignFromModel("position"),this.selected.position?this.selected.position.copy(t):this.selected.position=t.clone(),this.selected.data.position=this.selected.position.clone(),this.selected.model.position.copy(t);break;case"rotation":this.selected.rotation||(this.selected.rotation=new d.Euler),this.selected.rotation?this.selected.rotation.setFromVector3(t):this.selected.rotation=t.clone(),this.selected.model.rotation.copy(this.selected.rotation);break;case"scale":this.selected.scale||(this.selected.scale=new d.Vector3),this.selected.scale?this.selected.scale.copy(t):this.selected.scale=v.clone(),this.selected.model.scale.copy(this.selected.scale)}this.$emit("modify")}}},u=(0,l(6262).A)(m,[["render",function(e,t,l,d,p,m){const u=(0,o.resolveComponent)("icon"),h=(0,o.resolveComponent)("V3block"),v=(0,o.resolveComponent)("EulerBlock"),k=(0,o.resolveDirective)("tooltip");return(0,o.openBlock)(),(0,o.createElementBlock)("div",null,[(0,o.createElementVNode)("div",s,[(0,o.createElementVNode)("div",n,[(0,o.createElementVNode)("div",{class:"title",onClick:t[0]||(t[0]=e=>p.expanded=!p.expanded)},(0,o.toDisplayString)(p.expanded?"▼":"▶")+" Трансформ:",1),(0,o.createCommentVNode)("v-if",!0)]),p.expanded?((0,o.openBlock)(),(0,o.createElementBlock)("div",a,[l.selected.position?((0,o.openBlock)(),(0,o.createBlock)(h,{key:0,"onUpdate:values":t[4]||(t[4]=e=>m.onChangeTransform("position",e)),label:"Position",step:.1,values:l.selected.position,decimals:4},{tools:(0,o.withCtx)((()=>[(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createElementBlock)("button",{class:"square",onClick:t[3]||(t[3]=t=>e.removeTransform("position"))},[(0,o.createVNode)(u,{value:"bin",size:"1em"})])),[[k,"Удалить позицию"]])])),_:1},8,["values"])):((0,o.openBlock)(),(0,o.createElementBlock)("div",i,[(0,o.createElementVNode)("button",{class:"copybutton",onClick:t[5]||(t[5]=e=>m.assignFromModel("position"))},"Копировать позицию модели")])),l.selected.rotation?((0,o.openBlock)(),(0,o.createBlock)(v,{key:2,"onUpdate:values":t[7]||(t[7]=e=>m.onChangeTransform("rotation",e)),label:"Rotation",step:1,decimals:0,values:l.selected.rotation},{tools:(0,o.withCtx)((()=>[(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createElementBlock)("button",{class:"square",onClick:t[6]||(t[6]=t=>e.removeTransform("rotation"))},[(0,o.createVNode)(u,{value:"bin",size:"1em"})])),[[k,"Удалить вращение"]])])),_:1},8,["values"])):((0,o.openBlock)(),(0,o.createElementBlock)("div",c,[(0,o.createElementVNode)("button",{class:"copybutton",onClick:t[8]||(t[8]=e=>m.assignFromModel("rotation"))},"Копировать вращение модели")])),l.selected.scale?((0,o.openBlock)(),(0,o.createBlock)(h,{key:4,"onUpdate:values":t[10]||(t[10]=e=>m.onChangeTransform("scale",e)),label:"Scale",step:.01,values:l.selected.scale},{tools:(0,o.withCtx)((()=>[(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createElementBlock)("button",{class:"square",onClick:t[9]||(t[9]=t=>e.removeTransform("scale"))},[(0,o.createVNode)(u,{value:"bin",size:"1em"})])),[[k,"Удалить размер"]])])),_:1},8,["values"])):((0,o.openBlock)(),(0,o.createElementBlock)("div",r,[(0,o.createElementVNode)("button",{class:"copybutton",onClick:t[11]||(t[11]=e=>m.assignFromModel("scale"))},"Копировать размер модели")]))])):(0,o.createCommentVNode)("v-if",!0)])])}]])}}]);