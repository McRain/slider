"use strict";(self.webpackChunk_reneos_3d_mod_tweens=self.webpackChunk_reneos_3d_mod_tweens||[]).push([[261,479],{44:(e,t,a)=>{a.d(t,{A:()=>A});var l=a(27);const o={class:"flex-line"},i={class:"line-title"},n={class:"value-title"},s={value:"accurate"},r={value:"relative"},c={class:"flex-fit"},d={class:"flex-line"},p={class:"line-title"},m={class:"value-title"},u={value:"accurate"},y={value:"relative"},v={class:"flex-fit"},h={class:"flex-line"},f={class:"line-title"},g={class:"value-title"},V={class:"flex-line"},N={class:"line-title"},E={class:"value-title"},k={class:"flex-line"},b={class:"value-title"},x=["value"],w={class:"flex-line"},$={class:"value-title"},B=["checked"],z={class:"flex-line"};var C=a(490),U=a(816);const S={name:"TweenUI",props:{labels:{type:Object},property:{type:String},name:{type:String},from:{type:Object,default:{type:"accurate",value:{x:0,y:0,z:0}}},to:{type:Object,default:{type:"accurate",value:{x:0,y:0,z:0}}},delay:{type:Number},time:{type:Number},easing:{type:String,default:"Easing.Linear.InOut"},repeat:{type:Number},yoyo:{type:Boolean},options:{type:Object,default:{inspector:!1}}},computed:{fromtype:{get(){return this.from.type},set(e){this.$emit("update","from",{value:this.fromvalue,type:e})}},fromvalue:{get(){return this.from.value},set(e){this.$emit("update","from",{value:e,type:this.fromtype})}},totype:{get(){return this.to.type},set(e){this.$emit("update","to",{...this.to,type:e})}},tovalue:{get(){return this.to.value},set(e){this.$emit("update","to",{value:e,type:this.totype})}},easingval:{get(){return this.easing},set(e){this.$emit("update","easing",e)}},target(){return this.$app.selection.selected}},methods:{copyFromModel(e){const t=this.target.model[this.property].clone(),a=this[e];a.value.x=t.x,a.value.y=t.y,a.value.z=t.z,this.$emit("update",e,a)},reset(){const e=this.target[this.property]||this.target.model[this.property];this.target.model?this.target.model[this.property].copy(e):this.target[this.property].copy(e)},async play(){if(this.played)return this.played=!1,void this.$emit("play",this.played);this.played=!0,this.$emit("play",this.played),this.reset(),await TweenPos({from:this.from,to:this.to,delay:this.delay,time:this.time,easing:this.easing,repeat:this.repeat,yoyo:this.yoyo},this.target,!1),this.played=!1,this.$emit("play",this.played)}},data:()=>({easingList:[]}),components:{RepeatSelector:C.A},mounted(){Object.keys(U.Easing).forEach((e=>{let t=e;Object.keys(U.Easing[e]).forEach((e=>{this.easingList.push(`${t}.${e}`)}))}))}},A=(0,a(262).A)(S,[["render",function(e,t,a,C,U,S){const A=(0,l.resolveComponent)("icon"),M=(0,l.resolveComponent)("V3"),D=(0,l.resolveComponent)("Float"),O=(0,l.resolveComponent)("RepeatSelector");return(0,l.openBlock)(),(0,l.createElementBlock)("div",null,[(0,l.createElementVNode)("div",o,[(0,l.createElementVNode)("div",i,[t[11]||(t[11]=(0,l.createTextVNode)("Из: ")),a.options.inspector&&["accurate"].includes(a.from.type)?((0,l.openBlock)(),(0,l.createElementBlock)("button",{key:0,onClick:t[0]||(t[0]=e=>S.copyFromModel("from"))},[(0,l.createVNode)(A,{value:"target",size:"0.9em"})])):(0,l.createCommentVNode)("v-if",!0)]),(0,l.createElementVNode)("div",n,[(0,l.withDirectives)((0,l.createElementVNode)("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>S.fromtype=e)},[(0,l.createElementVNode)("option",s,(0,l.toDisplayString)(a.labels.accurate),1),(0,l.createElementVNode)("option",r,(0,l.toDisplayString)(a.labels.relative),1)],512),[[l.vModelSelect,S.fromtype]])])]),(0,l.createElementVNode)("div",c,[["accurate","relative"].includes(a.from.type)?((0,l.openBlock)(),(0,l.createBlock)(M,{key:0,"onUpdate:modelValue":t[2]||(t[2]=e=>S.fromvalue=e),step:.1,modelValue:S.fromvalue},null,8,["modelValue"])):(0,l.createCommentVNode)("v-if",!0)]),(0,l.createElementVNode)("div",d,[(0,l.createElementVNode)("div",p,[t[12]||(t[12]=(0,l.createTextVNode)("В:")),a.options.inspector&&["accurate"].includes(a.to.type)?((0,l.openBlock)(),(0,l.createElementBlock)("button",{key:0,onClick:t[3]||(t[3]=e=>S.copyFromModel("to"))},[(0,l.createVNode)(A,{value:"target",size:"0.9em"})])):(0,l.createCommentVNode)("v-if",!0)]),(0,l.createElementVNode)("div",m,[(0,l.withDirectives)((0,l.createElementVNode)("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>S.totype=e)},[(0,l.createElementVNode)("option",u,(0,l.toDisplayString)(a.labels.accurate),1),(0,l.createElementVNode)("option",y,(0,l.toDisplayString)(a.labels.relative),1)],512),[[l.vModelSelect,S.totype]])])]),(0,l.createElementVNode)("div",v,[["accurate","relative"].includes(a.to.type)?((0,l.openBlock)(),(0,l.createBlock)(M,{key:0,"onUpdate:modelValue":t[5]||(t[5]=e=>S.tovalue=e),step:.1,modelValue:S.tovalue},null,8,["modelValue"])):(0,l.createCommentVNode)("v-if",!0)]),(0,l.createElementVNode)("div",h,[(0,l.createElementVNode)("div",f,(0,l.toDisplayString)(a.labels.delay)+": ",1),(0,l.createElementVNode)("div",g,[(0,l.createVNode)(D,{modelValue:a.delay,min:0,decimals:0,step:10,"onUpdate:modelValue":t[6]||(t[6]=t=>e.$emit("update","delay",t))},null,8,["modelValue"])])]),(0,l.createElementVNode)("div",V,[(0,l.createElementVNode)("div",N,(0,l.toDisplayString)(a.labels.time)+": ",1),(0,l.createElementVNode)("div",E,[(0,l.createVNode)(D,{modelValue:a.time,min:0,decimals:0,step:10,"onUpdate:modelValue":t[7]||(t[7]=t=>e.$emit("update","time",t))},null,8,["modelValue"])])]),(0,l.createElementVNode)("div",k,[t[13]||(t[13]=(0,l.createElementVNode)("div",{class:"line-title"},"Затухание: ",-1)),(0,l.createElementVNode)("div",b,[(0,l.withDirectives)((0,l.createElementVNode)("select",{"onUpdate:modelValue":t[8]||(t[8]=e=>S.easingval=e)},[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(U.easingList,(e=>((0,l.openBlock)(),(0,l.createElementBlock)("option",{value:e},(0,l.toDisplayString)(e),9,x)))),256))],512),[[l.vModelSelect,S.easingval]])])]),(0,l.createElementVNode)("div",w,[t[14]||(t[14]=(0,l.createElementVNode)("div",{class:"line-title"},"Замыкание:",-1)),(0,l.createElementVNode)("div",$,[(0,l.createElementVNode)("input",{checked:a.yoyo,onChange:t[9]||(t[9]=t=>e.$emit("update","yoyo",t.target.checked)),type:"checkbox"},null,40,B)])]),(0,l.createElementVNode)("div",z,[t[15]||(t[15]=(0,l.createElementVNode)("div",null,"Повторы:",-1)),(0,l.createElementVNode)("div",null,[(0,l.createVNode)(O,{repeat:a.repeat,"onUpdate:repeat":t[10]||(t[10]=t=>e.$emit("update","repeat",t))},null,8,["repeat"])])])])}]])},70:(e,t,a)=>{a.d(t,{A:()=>n});const l=new(a(816).Group);let o=!1;class i{static get Group(){return l}static Add(e){l.add(e),o||(o=!0,i.Update())}static Remove(e){l.remove(e),0===l.getAll().length&&(o=!1)}static Update(e){o&&(l.update(e),requestAnimationFrame(i.Update))}static ToDegrees(e){return 180*e/Math.PI}static ToRadians(e){return e*Math.PI/180}static ToRadiansV3(e){return{x:e.x*Math.PI/180,y:e.y*Math.PI/180,z:e.z*Math.PI/180}}}const n=i},155:(e,t,a)=>{a.r(t),a.d(t,{default:()=>n});var l=a(816),o=a(70);const i=`${Date.now()}_${Math.random()}`;function n(e,t,a=!1){return new Promise((n=>{e.tween&&e.tween.uid===i&&(e.tween.stop(),o.A.Remove(e.tween));let s=t;if(e.paths)for(let t=0;t<e.paths.length;t++)s=s[e.paths[t]];if(e.target)for(let t=0;t<e.target.length;t++)s=s.children.find((a=>a.uid===e.target[t]));const r="accurate"===e.from.type?{...e.from.value}:{x:s.model.scale.x+e.from.value.x,y:s.model.scale.y+e.from.value.y,z:s.model.scale.z+e.from.value.z};let c=e.scale||s.data.scale||s.model.data.scale||s.model.scale;if("target"===e.to.type){let a=t.slide||t;for(let t=0;t<e.to.paths.length;t++)a=a.children.find((a=>a.uid===e.to.paths[t]));c=a.scale||a.model.scale}const d="accurate"===e.to.type?e.to.value:{x:c.x+e.to.value.x,y:c.y+e.to.value.y,z:c.z+e.to.value.z};s.model.scale.copy(r),s.model.visible=!0,e.tween=new l.Tween(r).to(d,a?0:e.time||1e3).delay(a?0:e.delay||0).easing(l.Easing.Quadratic.InOut).yoyo(e.yoyo).repeat("Infinity"===e.repeat?1/0:e.repeat||0).onUpdate((()=>{s.model.scale.copy(r)})).onComplete((()=>{o.A.Remove(e.tween),e.tween=null,n()})),e.tween.uid=i,e.tween.start(),o.A.Add(e.tween)}))}},262:(e,t)=>{t.A=(e,t)=>{const a=e.__vccOpts||e;for(const[e,l]of t)a[e]=l;return a}},347:(e,t,a)=>{a.r(t),a.d(t,{default:()=>d});var l=a(27);const o={class:"vertflex"},i={class:"flex-fit",style:{"justify-content":"center"}},n={key:0,class:"flex-fit",style:{"justify-content":"center"}};var s=a(155),r=a(44);const c={name:"TweenScale",props:{name:{type:String},from:{type:Object,default:{type:"accurate",value:{x:0,y:0,z:0}}},to:{type:Object,default:{type:"accurate",value:{x:0,y:0,z:0}}},delay:{type:Number},time:{type:Number},easing:{type:String,default:"Easing.Linear.InOut"},repeat:{type:Number},yoyo:{type:Boolean},options:{type:Object,default:{inspector:!1}}},data:()=>({labels:{accurate:"Точный размер",relative:"Относительный размер",delay:"Отсрочка (мсек)",time:"Время (мсек)"},played:!1}),computed:{fromtype:{get(){return this.from.type},set(e){this.$emit("update","from",{value:this.fromvalue,type:e})}},fromvalue:{get(){return this.from.value},set(e){this.$emit("update","from",{value:e,type:this.fromtype})}},totype:{get(){return this.to.type},set(e){this.$emit("update","to.type",e)}},tovalue:{get(){return this.to.value},set(e){this.$emit("update","to",{value:e,type:this.totype})}},easingval:{get(){return this.easing},set(e){this.$emit("update","easing",e)}},target(){return this.$app.selection.selected}},methods:{onUpdate(e,t){this.$emit("update",e,t)},copyFromModel(e){const t=this.target.model.scale.clone();e.value.x=t.x,e.value.y=t.y,e.value.z=t.z},reset(){const e=this.target.scale||this.target.model.scale;this.target.model?this.target.model.scale.copy(e):this.target.scale.copy(e)},async play(){if(this.played)return this.played=!1,void this.$emit("play",this.played);this.played=!0,this.$emit("play",this.played),this.reset(),await(0,s.default)({from:this.from,to:this.to,delay:this.delay,time:this.time,easing:this.easing,repeat:this.repeat,yoyo:this.yoyo},this.target,!1),this.played=!1,this.$emit("play",this.played)}},components:{TweenUI:r.A}},d=(0,a(262).A)(c,[["render",function(e,t,a,s,r,c){const d=(0,l.resolveComponent)("TweenUI"),p=(0,l.resolveComponent)("icon");return(0,l.openBlock)(),(0,l.createElementBlock)("div",o,[(0,l.createElementVNode)("div",i,[(0,l.renderSlot)(e.$slots,"default")]),(0,l.createVNode)(d,{labels:r.labels,property:"scale",name:a.name,from:a.from,to:a.to,delay:a.delay,time:a.time,easing:a.easing,repeat:a.repeat,yoyo:a.yoyo,options:a.options,onUpdate:c.onUpdate},null,8,["labels","name","from","to","delay","time","easing","repeat","yoyo","options","onUpdate"]),a.options.inspector?((0,l.openBlock)(),(0,l.createElementBlock)("div",n,[(0,l.createElementVNode)("button",{class:"square",onClick:t[0]||(t[0]=t=>e.$emit("play"))},[(0,l.createVNode)(p,{value:r.played?"stop2":"play3",size:"1.2em"},null,8,["value"])]),(0,l.createElementVNode)("button",{onClick:t[1]||(t[1]=t=>e.$emit("reset"))},[(0,l.createVNode)(p,{value:"undo",size:"1em"})]),(0,l.createElementVNode)("button",{onClick:t[2]||(t[2]=t=>e.$emit("remove"))},[(0,l.createVNode)(p,{value:"bin",size:"1em"})])])):(0,l.createCommentVNode)("v-if",!0)])}]])},490:(e,t,a)=>{a.d(t,{A:()=>n});var l=a(27);const o={style:{display:"flex","flex-wrap":"nowrap",gap:"10px","justify-content":"flex-end"}},i={props:{repeat:{type:Number}},computed:{rep:{get(){return this.repeat},set(e){this.$emit("update:repeat",e)}},infin:{get(){return 0===this.repeat},set(e){this.$emit("update:repeat",e?0:this.repeat||1)}}},data(){return{inputRepeat:this.repeat}}},n=(0,a(262).A)(i,[["render",function(e,t,a,i,n,s){const r=(0,l.resolveComponent)("icon");return(0,l.openBlock)(),(0,l.createElementBlock)("div",o,[s.infin?(0,l.createCommentVNode)("v-if",!0):(0,l.withDirectives)(((0,l.openBlock)(),(0,l.createElementBlock)("input",{key:0,style:{width:"42px",height:"0.98em"},type:"number","onUpdate:modelValue":t[0]||(t[0]=e=>s.rep=e),min:"1"},null,512)),[[l.vModelText,s.rep,void 0,{number:!0}]]),(0,l.createVNode)(r,{style:(0,l.normalizeStyle)({opacity:s.infin?1:.5}),value:"infinite",size:"1em"},null,8,["style"]),(0,l.withDirectives)((0,l.createElementVNode)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>s.infin=e),type:"checkbox"},null,512),[[l.vModelCheckbox,s.infin]])])}]])}}]);