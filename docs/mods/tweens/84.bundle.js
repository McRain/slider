"use strict";(self.webpackChunk_reneos_3d_mod_tweens=self.webpackChunk_reneos_3d_mod_tweens||[]).push([[84],{70:(e,t,o)=>{o.d(t,{A:()=>i});const r=new(o(816).Group);let n=!1;class a{static get Group(){return r}static Add(e){r.add(e),n||(n=!0,a.Update())}static Remove(e){r.remove(e),0===r.getAll().length&&(n=!1)}static Update(e){n&&(r.update(e),requestAnimationFrame(a.Update))}static ToDegrees(e){return 180*e/Math.PI}static ToRadians(e){return e*Math.PI/180}static ToRadiansV3(e){return{x:e.x*Math.PI/180,y:e.y*Math.PI/180,z:e.z*Math.PI/180}}}const i=a},470:(e,t,o)=>{o.r(t),o.d(t,{default:()=>d});var r=o(816),n=o(70),a=o(500);const i=`${Date.now()}_${Math.random()}`;function d(e,t,o=!1){return new Promise((d=>{e.tween&&e.tween.uid===i&&(e.tween.stop(),n.A.Remove(e.tween));let s=t;try{e.paths&&e.paths.forEach((e=>{if(!s)throw new Error(`Target is null at path ${e}`);s=s[e]})),e.target&&e.target.forEach((e=>{if(!s?.children)throw new Error("No children in target");const t=s.children.find((t=>t.uid===e));if(!t)throw new Error(`Child with uid ${e} not found`);s=t}))}catch(e){return console.error("Target resolution error:",e),d()}if(!s?.model)return console.error("Target model not found"),d();const l=(e,t,o)=>{const r="accurate"===t?n.A.ToRadiansV3({...e}):{x:(o?.x||0)+n.A.ToRadians(e?.x||0),y:(o?.y||0)+n.A.ToRadians(e?.y||0),z:(o?.z||0)+n.A.ToRadians(e?.z||0)};return new a.Euler(r.x,r.y,r.z,"XYZ")};let u=e.rotation||s.data?.rotation||s.model.data?.rotation;if("target"===e.to?.type)try{let o=t.slide||t;for(const t of e.to.paths||[]){if(!o?.children)throw new Error("No children in intermediate target");if(o=o.children.find((e=>e.uid===t)),!o)throw new Error(`Target with uid ${t} not found`)}u=o.rotation||o.model.rotation}catch(e){return console.error("Target rotation resolution error:",e),d()}const c=l(e.from.value,e.from.type,s.model.rotation),w=l(e.to?.value||{},e.to?.type,u),h=(new a.Quaternion).setFromEuler(c),p=(new a.Quaternion).setFromEuler(w),m=h.clone();s.model.quaternion.copy(h);const f={t:0};e.tween=new r.Tween(f).to({t:1},o?0:e.time||1e3).delay(o?0:e.delay||0).easing(r.Easing.Quadratic.InOut).yoyo(Boolean(e.yoyo)).repeat(e.repeat||0).onUpdate((()=>{m.copy(h).slerp(p,f.t),s.model.quaternion.copy(m)})).onComplete((()=>{n.A.Remove(e.tween),e.tween=null,d()})).onStop((()=>{n.A.Remove(e.tween),e.tween=null,d()})),e.tween.uid=i,n.A.Add(e.tween),e.tween.start()}))}}}]);